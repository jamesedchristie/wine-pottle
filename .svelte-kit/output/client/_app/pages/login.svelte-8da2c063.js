import{S as e,i as r,s as t,j as s,m as a,o as n,v as o,r as i,w as l,G as c,e as u,k as d,l as f,c as p,a as $,n as m,d as h,f as g,D as v,B as y,u as E,t as w,g as P,Q as j,b as L,O as k,L as x,P as I,h as b}from"../chunks/vendor-197173f7.js";import{g as D}from"../chunks/navigation-20968cc5.js";import{E as N}from"../chunks/ErrorAlert-f76ade2a.js";import{C as V}from"../chunks/Card-4907b462.js";import{B as R}from"../chunks/Button-80d06a7e.js";import{s as B}from"../chunks/stores-23449eec.js";import{l as A}from"../chunks/stores-6ec92c62.js";import"../chunks/singletons-bb9012b7.js";/* empty css                                                         *//* empty css                                                   */function T(e){let r;return{c(){r=w("Login")},l(e){r=P(e,"Login")},m(e,t){g(e,r,t)},d(e){e&&h(r)}}}function U(e){let r;return{c(){r=w("Register")},l(e){r=P(e,"Register")},m(e,t){g(e,r,t)},d(e){e&&h(r)}}}function C(e){let r,t,c,f,j,b,D,N,V,B,A,T,U,C,H,O,S,J,G,Q,q,z,F,K,W,X,Y,Z,ee,re,te,se,ae,ne,oe=e[1]&&M(e);return te=new R({props:{variant:"primary",$$slots:{default:[_]},$$scope:{ctx:e}}}),te.$on("click",e[7]),{c(){r=u("div"),oe&&oe.c(),t=d(),c=u("h4"),f=w("Register"),j=d(),b=u("div"),D=u("label"),N=w("Username"),V=d(),B=u("input"),A=d(),T=u("div"),U=u("label"),C=w("Email"),H=d(),O=u("input"),S=d(),J=u("div"),G=u("label"),Q=w("Password"),q=d(),z=u("input"),F=d(),K=u("div"),W=u("label"),X=w("Password"),Y=d(),Z=u("input"),ee=d(),re=u("div"),s(te.$$.fragment),this.h()},l(e){r=p(e,"DIV",{});var s=$(r);oe&&oe.l(s),t=m(s),c=p(s,"H4",{});var n=$(c);f=P(n,"Register"),n.forEach(h),j=m(s),b=p(s,"DIV",{});var o=$(b);D=p(o,"LABEL",{for:!0});var i=$(D);N=P(i,"Username"),i.forEach(h),V=m(o),B=p(o,"INPUT",{id:!0,type:!0,placeholder:!0}),o.forEach(h),A=m(s),T=p(s,"DIV",{});var l=$(T);U=p(l,"LABEL",{for:!0});var u=$(U);C=P(u,"Email"),u.forEach(h),H=m(l),O=p(l,"INPUT",{id:!0,type:!0,placeholder:!0}),l.forEach(h),S=m(s),J=p(s,"DIV",{});var d=$(J);G=p(d,"LABEL",{for:!0});var g=$(G);Q=P(g,"Password"),g.forEach(h),q=m(d),z=p(d,"INPUT",{id:!0,type:!0,placeholder:!0}),d.forEach(h),F=m(s),K=p(s,"DIV",{});var v=$(K);W=p(v,"LABEL",{for:!0});var y=$(W);X=P(y,"Password"),y.forEach(h),Y=m(v),Z=p(v,"INPUT",{id:!0,type:!0,placeholder:!0}),v.forEach(h),ee=m(s),re=p(s,"DIV",{});var E=$(re);a(te.$$.fragment,E),E.forEach(h),s.forEach(h),this.h()},h(){L(D,"for","registerName"),L(B,"id","registerName"),L(B,"type","text"),L(B,"placeholder","Enter you username"),L(U,"for","registerEmail"),L(O,"id","registerEmail"),L(O,"type","email"),L(O,"placeholder","Enter your email address"),L(G,"for","registerPassword"),L(z,"id","registerPassword"),L(z,"type","password"),L(z,"placeholder","Enter your password"),L(W,"for","confirmRegisterPassword"),L(Z,"id","confirmRegisterPassword"),L(Z,"type","password"),L(Z,"placeholder","Enter your password")},m(s,a){g(s,r,a),oe&&oe.m(r,null),v(r,t),v(r,c),v(c,f),v(r,j),v(r,b),v(b,D),v(D,N),v(b,V),v(b,B),k(B,e[3]),v(r,A),v(r,T),v(T,U),v(U,C),v(T,H),v(T,O),k(O,e[2]),v(r,S),v(r,J),v(J,G),v(G,Q),v(J,q),v(J,z),k(z,e[4]),v(r,F),v(r,K),v(K,W),v(W,X),v(K,Y),v(K,Z),k(Z,e[5]),v(r,ee),v(r,re),n(te,re,null),se=!0,ae||(ne=[x(B,"input",e[12]),x(O,"input",e[13]),x(z,"input",e[14]),x(Z,"input",e[15])],ae=!0)},p(e,s){e[1]?oe?(oe.p(e,s),2&s&&o(oe,1)):(oe=M(e),oe.c(),o(oe,1),oe.m(r,t)):oe&&(y(),i(oe,1,1,(()=>{oe=null})),E()),8&s&&B.value!==e[3]&&k(B,e[3]),4&s&&O.value!==e[2]&&k(O,e[2]),16&s&&z.value!==e[4]&&k(z,e[4]),32&s&&Z.value!==e[5]&&k(Z,e[5]);const a={};524288&s&&(a.$$scope={dirty:s,ctx:e}),te.$set(a)},i(e){se||(o(oe),o(te.$$.fragment,e),se=!0)},o(e){i(oe),i(te.$$.fragment,e),se=!1},d(e){e&&h(r),oe&&oe.d(),l(te),ae=!1,I(ne)}}}function H(e){let r,t,c,f,j,b,D,N,V,B,A,T,U,C,H,M,_,J,G,Q,q,z,F=e[1]&&O(e);return G=new R({props:{variant:"primary",$$slots:{default:[S]},$$scope:{ctx:e}}}),G.$on("click",e[6]),{c(){r=u("div"),F&&F.c(),t=d(),c=u("h4"),f=w("Login"),j=d(),b=u("div"),D=u("label"),N=w("Email"),V=d(),B=u("input"),A=d(),T=u("div"),U=u("label"),C=w("Password"),H=d(),M=u("input"),_=d(),J=u("div"),s(G.$$.fragment),this.h()},l(e){r=p(e,"DIV",{});var s=$(r);F&&F.l(s),t=m(s),c=p(s,"H4",{});var n=$(c);f=P(n,"Login"),n.forEach(h),j=m(s),b=p(s,"DIV",{});var o=$(b);D=p(o,"LABEL",{for:!0});var i=$(D);N=P(i,"Email"),i.forEach(h),V=m(o),B=p(o,"INPUT",{id:!0,type:!0,placeholder:!0}),o.forEach(h),A=m(s),T=p(s,"DIV",{});var l=$(T);U=p(l,"LABEL",{for:!0});var u=$(U);C=P(u,"Password"),u.forEach(h),H=m(l),M=p(l,"INPUT",{id:!0,type:!0,placeholder:!0}),l.forEach(h),_=m(s),J=p(s,"DIV",{});var d=$(J);a(G.$$.fragment,d),d.forEach(h),s.forEach(h),this.h()},h(){L(D,"for","loginEmail"),L(B,"id","loginEmail"),L(B,"type","email"),L(B,"placeholder","Enter your email address"),L(U,"for","loginPassword"),L(M,"id","loginPassword"),L(M,"type","password"),L(M,"placeholder","Enter your password")},m(s,a){g(s,r,a),F&&F.m(r,null),v(r,t),v(r,c),v(c,f),v(r,j),v(r,b),v(b,D),v(D,N),v(b,V),v(b,B),k(B,e[2]),v(r,A),v(r,T),v(T,U),v(U,C),v(T,H),v(T,M),k(M,e[4]),v(r,_),v(r,J),n(G,J,null),Q=!0,q||(z=[x(B,"input",e[10]),x(M,"input",e[11])],q=!0)},p(e,s){e[1]?F?(F.p(e,s),2&s&&o(F,1)):(F=O(e),F.c(),o(F,1),F.m(r,t)):F&&(y(),i(F,1,1,(()=>{F=null})),E()),4&s&&B.value!==e[2]&&k(B,e[2]),16&s&&M.value!==e[4]&&k(M,e[4]);const a={};524288&s&&(a.$$scope={dirty:s,ctx:e}),G.$set(a)},i(e){Q||(o(F),o(G.$$.fragment,e),Q=!0)},o(e){i(F),i(G.$$.fragment,e),Q=!1},d(e){e&&h(r),F&&F.d(),l(G),q=!1,I(z)}}}function M(e){let r,t;return r=new N({props:{message:e[1]}}),{c(){s(r.$$.fragment)},l(e){a(r.$$.fragment,e)},m(e,s){n(r,e,s),t=!0},p(e,t){const s={};2&t&&(s.message=e[1]),r.$set(s)},i(e){t||(o(r.$$.fragment,e),t=!0)},o(e){i(r.$$.fragment,e),t=!1},d(e){l(r,e)}}}function _(e){let r;return{c(){r=w("Register")},l(e){r=P(e,"Register")},m(e,t){g(e,r,t)},d(e){e&&h(r)}}}function O(e){let r,t;return r=new N({props:{message:e[1]}}),{c(){s(r.$$.fragment)},l(e){a(r.$$.fragment,e)},m(e,s){n(r,e,s),t=!0},p(e,t){const s={};2&t&&(s.message=e[1]),r.$set(s)},i(e){t||(o(r.$$.fragment,e),t=!0)},o(e){i(r.$$.fragment,e),t=!1},d(e){l(r,e)}}}function S(e){let r;return{c(){r=w("Login")},l(e){r=P(e,"Login")},m(e,t){g(e,r,t)},d(e){e&&h(r)}}}function J(e){let r,t,c,w,P,j,L,k,x;t=new R({props:{variant:"login"===e[0]?"secondary":"primary",$$slots:{default:[T]},$$scope:{ctx:e}}}),t.$on("click",e[8]),w=new R({props:{variant:"register"===e[0]?"secondary":"primary",$$slots:{default:[U]},$$scope:{ctx:e}}}),w.$on("click",e[9]);const I=[H,C],b=[];function D(e,r){return"login"===e[0]?0:1}return j=D(e),L=b[j]=I[j](e),{c(){r=u("div"),s(t.$$.fragment),c=d(),s(w.$$.fragment),P=d(),L.c(),k=f()},l(e){r=p(e,"DIV",{});var s=$(r);a(t.$$.fragment,s),c=m(s),a(w.$$.fragment,s),s.forEach(h),P=m(e),L.l(e),k=f()},m(e,s){g(e,r,s),n(t,r,null),v(r,c),n(w,r,null),g(e,P,s),b[j].m(e,s),g(e,k,s),x=!0},p(e,r){const s={};1&r&&(s.variant="login"===e[0]?"secondary":"primary"),524288&r&&(s.$$scope={dirty:r,ctx:e}),t.$set(s);const a={};1&r&&(a.variant="register"===e[0]?"secondary":"primary"),524288&r&&(a.$$scope={dirty:r,ctx:e}),w.$set(a);let n=j;j=D(e),j===n?b[j].p(e,r):(y(),i(b[n],1,1,(()=>{b[n]=null})),E(),L=b[j],L?L.p(e,r):(L=b[j]=I[j](e),L.c()),o(L,1),L.m(k.parentNode,k))},i(e){x||(o(t.$$.fragment,e),o(w.$$.fragment,e),o(L),x=!0)},o(e){i(t.$$.fragment,e),i(w.$$.fragment,e),i(L),x=!1},d(e){e&&h(r),l(t),l(w),e&&h(P),b[j].d(e),e&&h(k)}}}function G(e){let r,t;return r=new V({props:{title:"login"===e[0]?"Login":"Register",$$slots:{default:[J]},$$scope:{ctx:e}}}),{c(){s(r.$$.fragment)},l(e){a(r.$$.fragment,e)},m(e,s){n(r,e,s),t=!0},p(e,[t]){const s={};1&t&&(s.title="login"===e[0]?"Login":"Register"),524351&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s)},i(e){t||(o(r.$$.fragment,e),t=!0)},o(e){i(r.$$.fragment,e),t=!1},d(e){l(r,e)}}}function Q(e,r,t){let s,a;c(e,A,(e=>t(16,s=e))),c(e,B,(e=>t(17,a=e)));var n=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(r){n(r)}}function i(e){try{l(s.throw(e))}catch(r){n(r)}}function l(e){var r;e.done?a(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,i)}l((s=s.apply(e,r||[])).next())}))};let{authMode:o="login"}=r,i=null,l="",u="",d="",f="";return e.$$set=e=>{"authMode"in e&&t(0,o=e.authMode)},[o,i,l,u,d,f,function(){return n(this,void 0,void 0,(function*(){if(l&&d)try{j(A,s=!0,s);const e=yield fetch("auth/login",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:d})});if(!e.ok){throw(yield e.json()).errors}const r=yield e.json(),t=yield fetch(`users/${r.user.uid}.json`);if(!t.ok){throw(yield t.json()).errors}const n=yield t.json();j(B,a.user=n,a),j(A,s=!1,s),D("/")}catch(e){return j(A,s=!1,s),void t(1,i=e)}else t(1,i="Please fill out all fields")}))},function(){return n(this,void 0,void 0,(function*(){if(l&&d&&f&&u)if(d===f)try{const e=yield fetch("auth/register",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,email:l,password:d})});if(!e.ok){throw(yield e.json()).errors}const r=yield e.json(),t=yield fetch(`users/${r.user.uid}.json`),s=yield t.json();if(!t.ok)throw s.errors;j(B,a.user=s.user,a),D("/")}catch(e){return void t(1,i=e)}else t(1,i="Passwords do not match");else t(1,i="Please fill out all fields")}))},()=>t(0,o="login"),()=>t(0,o="register"),function(){l=this.value,t(2,l)},function(){d=this.value,t(4,d)},function(){u=this.value,t(3,u)},function(){l=this.value,t(2,l)},function(){d=this.value,t(4,d)},function(){f=this.value,t(5,f)}]}class q extends e{constructor(e){super(),r(this,e,Q,G,t,{authMode:0})}}function z(e){let r,t,c,f,y,E,j,L=e[1].user?" "+e[1].user.name:"";return E=new q({}),{c(){r=u("h2"),t=w(e[0]),c=w(L),f=w("!"),y=d(),s(E.$$.fragment)},l(s){r=p(s,"H2",{});var n=$(r);t=P(n,e[0]),c=P(n,L),f=P(n,"!"),n.forEach(h),y=m(s),a(E.$$.fragment,s)},m(e,s){g(e,r,s),v(r,t),v(r,c),v(r,f),g(e,y,s),n(E,e,s),j=!0},p(e,[r]){(!j||1&r)&&b(t,e[0]),(!j||2&r)&&L!==(L=e[1].user?" "+e[1].user.name:"")&&b(c,L)},i(e){j||(o(E.$$.fragment,e),j=!0)},o(e){i(E.$$.fragment,e),j=!1},d(e){e&&h(r),e&&h(y),l(E,e)}}}const F=({session:e})=>({props:{message:"Hello"}});function K(e,r,t){let s;c(e,B,(e=>t(1,s=e)));let{message:a}=r;return e.$$set=e=>{"message"in e&&t(0,a=e.message)},[a,s]}export default class extends e{constructor(e){super(),r(this,e,K,z,t,{message:0})}}export{F as load};
