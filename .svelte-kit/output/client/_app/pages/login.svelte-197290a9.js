import{S as e,i as t,s as r,E as s,e as a,t as n,k as o,c as i,a as l,g as c,d as u,n as d,b as f,f as $,D as p,h as m,F as h,v as g,r as v,j as y,m as E,o as w,w as P,G as I,L,l as x,B as D,u as k,U as V,W as b,X as N,_ as R,Y as j,Z as B,$ as T,Q as U,N as A,T as H}from"../chunks/vendor-4d4e9b60.js";import{g as M}from"../chunks/navigation-20968cc5.js";import{E as _}from"../chunks/ErrorAlert-442993d9.js";/* empty css                                                   */import{B as C}from"../chunks/Button-05365e81.js";import{s as z}from"../chunks/stores-30b5dc7d.js";import{l as F}from"../chunks/stores-e8816885.js";import"../chunks/singletons-bb9012b7.js";function G(e){let t,r,y,E,w,P;const I=e[2].default,L=s(I,e,e[1],null);return{c(){t=a("div"),r=a("div"),y=n(e[0]),E=o(),w=a("div"),L&&L.c(),this.h()},l(s){t=i(s,"DIV",{class:!0});var a=l(t);r=i(a,"DIV",{class:!0});var n=l(r);y=c(n,e[0]),n.forEach(u),E=d(a),w=i(a,"DIV",{class:!0});var o=l(w);L&&L.l(o),o.forEach(u),a.forEach(u),this.h()},h(){f(r,"class","cardTitle svelte-1trv6g"),f(w,"class","cardContent svelte-1trv6g"),f(t,"class","cardContainer svelte-1trv6g")},m(e,s){$(e,t,s),p(t,r),p(r,y),p(t,E),p(t,w),L&&L.m(w,null),P=!0},p(e,[t]){(!P||1&t)&&m(y,e[0]),L&&L.p&&(!P||2&t)&&h(L,I,e,e[1],t,null,null)},i(e){P||(g(L,e),P=!0)},o(e){v(L,e),P=!1},d(e){e&&u(t),L&&L.d(e)}}}function Q(e,t,r){let{$$slots:s={},$$scope:a}=t,{title:n=""}=t;return e.$$set=e=>{"title"in e&&r(0,n=e.title),"$$scope"in e&&r(1,a=e.$$scope)},[n,a,s]}class S extends e{constructor(e){super(),t(this,e,Q,G,r,{title:0})}}function W(e){let t;return{c(){t=n("Login")},l(e){t=c(e,"Login")},m(e,r){$(e,t,r)},d(e){e&&u(t)}}}function X(e){let t;return{c(){t=n("Register")},l(e){t=c(e,"Register")},m(e,r){$(e,t,r)},d(e){e&&u(t)}}}function Y(e){let t,r,s,m,h,I,L,x,V,b,N,R,j,B,T,M,_,z,F,G,Q,S,W,X,Y,Z,K,O,ee,te,re,se,ae,ne,oe=e[1]&&q(e);return re=new C({props:{variant:"primary",$$slots:{default:[J]},$$scope:{ctx:e}}}),re.$on("click",e[8]),{c(){t=a("div"),oe&&oe.c(),r=o(),s=a("h4"),m=n("Register"),h=o(),I=a("div"),L=a("label"),x=n("Username"),V=o(),b=a("input"),N=o(),R=a("div"),j=a("label"),B=n("Email"),T=o(),M=a("input"),_=o(),z=a("div"),F=a("label"),G=n("Password"),Q=o(),S=a("input"),W=o(),X=a("div"),Y=a("label"),Z=n("Password"),K=o(),O=a("input"),ee=o(),te=a("div"),y(re.$$.fragment),this.h()},l(e){t=i(e,"DIV",{});var a=l(t);oe&&oe.l(a),r=d(a),s=i(a,"H4",{});var n=l(s);m=c(n,"Register"),n.forEach(u),h=d(a),I=i(a,"DIV",{});var o=l(I);L=i(o,"LABEL",{for:!0});var f=l(L);x=c(f,"Username"),f.forEach(u),V=d(o),b=i(o,"INPUT",{id:!0,type:!0,placeholder:!0}),o.forEach(u),N=d(a),R=i(a,"DIV",{});var $=l(R);j=i($,"LABEL",{for:!0});var p=l(j);B=c(p,"Email"),p.forEach(u),T=d($),M=i($,"INPUT",{id:!0,type:!0,placeholder:!0}),$.forEach(u),_=d(a),z=i(a,"DIV",{});var g=l(z);F=i(g,"LABEL",{for:!0});var v=l(F);G=c(v,"Password"),v.forEach(u),Q=d(g),S=i(g,"INPUT",{id:!0,type:!0,placeholder:!0}),g.forEach(u),W=d(a),X=i(a,"DIV",{});var y=l(X);Y=i(y,"LABEL",{for:!0});var w=l(Y);Z=c(w,"Password"),w.forEach(u),K=d(y),O=i(y,"INPUT",{id:!0,type:!0,placeholder:!0}),y.forEach(u),ee=d(a),te=i(a,"DIV",{});var P=l(te);E(re.$$.fragment,P),P.forEach(u),a.forEach(u),this.h()},h(){f(L,"for","registerName"),f(b,"id","registerName"),f(b,"type","text"),f(b,"placeholder","Enter you username"),f(j,"for","registerEmail"),f(M,"id","registerEmail"),f(M,"type","email"),f(M,"placeholder","Enter your email address"),f(F,"for","registerPassword"),f(S,"id","registerPassword"),f(S,"type","password"),f(S,"placeholder","Enter your password"),f(Y,"for","confirmRegisterPassword"),f(O,"id","confirmRegisterPassword"),f(O,"type","password"),f(O,"placeholder","Enter your password")},m(a,n){$(a,t,n),oe&&oe.m(t,null),p(t,r),p(t,s),p(s,m),p(t,h),p(t,I),p(I,L),p(L,x),p(I,V),p(I,b),U(b,e[3]),p(t,N),p(t,R),p(R,j),p(j,B),p(R,T),p(R,M),U(M,e[2]),p(t,_),p(t,z),p(z,F),p(F,G),p(z,Q),p(z,S),U(S,e[4]),p(t,W),p(t,X),p(X,Y),p(Y,Z),p(X,K),p(X,O),U(O,e[5]),p(t,ee),p(t,te),w(re,te,null),se=!0,ae||(ne=[A(b,"input",e[13]),A(M,"input",e[14]),A(S,"input",e[15]),A(O,"input",e[16])],ae=!0)},p(e,s){e[1]?oe?(oe.p(e,s),2&s&&g(oe,1)):(oe=q(e),oe.c(),g(oe,1),oe.m(t,r)):oe&&(D(),v(oe,1,1,(()=>{oe=null})),k()),8&s&&b.value!==e[3]&&U(b,e[3]),4&s&&M.value!==e[2]&&U(M,e[2]),16&s&&S.value!==e[4]&&U(S,e[4]),32&s&&O.value!==e[5]&&U(O,e[5]);const a={};4194304&s&&(a.$$scope={dirty:s,ctx:e}),re.$set(a)},i(e){se||(g(oe),g(re.$$.fragment,e),se=!0)},o(e){v(oe),v(re.$$.fragment,e),se=!1},d(e){e&&u(t),oe&&oe.d(),P(re),ae=!1,H(ne)}}}function Z(e){let t,r,s,m,h,I,L,x,V,b,N,R,j,B,T,M,_,z,F,G,Q,S,W=e[1]&&K(e);return F=new C({props:{variant:"primary",$$slots:{default:[O]},$$scope:{ctx:e}}}),F.$on("click",e[7]),{c(){t=a("div"),W&&W.c(),r=o(),s=a("h4"),m=n("Login"),h=o(),I=a("div"),L=a("label"),x=n("Email"),V=o(),b=a("input"),N=o(),R=a("div"),j=a("label"),B=n("Password"),T=o(),M=a("input"),_=o(),z=a("div"),y(F.$$.fragment),this.h()},l(e){t=i(e,"DIV",{});var a=l(t);W&&W.l(a),r=d(a),s=i(a,"H4",{});var n=l(s);m=c(n,"Login"),n.forEach(u),h=d(a),I=i(a,"DIV",{});var o=l(I);L=i(o,"LABEL",{for:!0});var f=l(L);x=c(f,"Email"),f.forEach(u),V=d(o),b=i(o,"INPUT",{id:!0,type:!0,placeholder:!0}),o.forEach(u),N=d(a),R=i(a,"DIV",{});var $=l(R);j=i($,"LABEL",{for:!0});var p=l(j);B=c(p,"Password"),p.forEach(u),T=d($),M=i($,"INPUT",{id:!0,type:!0,placeholder:!0}),$.forEach(u),_=d(a),z=i(a,"DIV",{});var g=l(z);E(F.$$.fragment,g),g.forEach(u),a.forEach(u),this.h()},h(){f(L,"for","loginEmail"),f(b,"id","loginEmail"),f(b,"type","email"),f(b,"placeholder","Enter your email address"),f(j,"for","loginPassword"),f(M,"id","loginPassword"),f(M,"type","password"),f(M,"placeholder","Enter your password")},m(a,n){$(a,t,n),W&&W.m(t,null),p(t,r),p(t,s),p(s,m),p(t,h),p(t,I),p(I,L),p(L,x),p(I,V),p(I,b),U(b,e[2]),p(t,N),p(t,R),p(R,j),p(j,B),p(R,T),p(R,M),U(M,e[4]),p(t,_),p(t,z),w(F,z,null),G=!0,Q||(S=[A(b,"input",e[11]),A(M,"input",e[12])],Q=!0)},p(e,s){e[1]?W?(W.p(e,s),2&s&&g(W,1)):(W=K(e),W.c(),g(W,1),W.m(t,r)):W&&(D(),v(W,1,1,(()=>{W=null})),k()),4&s&&b.value!==e[2]&&U(b,e[2]),16&s&&M.value!==e[4]&&U(M,e[4]);const a={};4194304&s&&(a.$$scope={dirty:s,ctx:e}),F.$set(a)},i(e){G||(g(W),g(F.$$.fragment,e),G=!0)},o(e){v(W),v(F.$$.fragment,e),G=!1},d(e){e&&u(t),W&&W.d(),P(F),Q=!1,H(S)}}}function q(e){let t,r;return t=new _({props:{message:e[1]}}),{c(){y(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){w(t,e,s),r=!0},p(e,r){const s={};2&r&&(s.message=e[1]),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function J(e){let t;return{c(){t=n("Register")},l(e){t=c(e,"Register")},m(e,r){$(e,t,r)},d(e){e&&u(t)}}}function K(e){let t,r;return t=new _({props:{message:e[1]}}),{c(){y(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){w(t,e,s),r=!0},p(e,r){const s={};2&r&&(s.message=e[1]),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function O(e){let t;return{c(){t=n("Login")},l(e){t=c(e,"Login")},m(e,r){$(e,t,r)},d(e){e&&u(t)}}}function ee(e){let t,r,s,n,c,f,m,h,I;r=new C({props:{variant:"login"===e[0]?"secondary":"primary",$$slots:{default:[W]},$$scope:{ctx:e}}}),r.$on("click",e[9]),n=new C({props:{variant:"register"===e[0]?"secondary":"primary",$$slots:{default:[X]},$$scope:{ctx:e}}}),n.$on("click",e[10]);const L=[Z,Y],V=[];function b(e,t){return"login"===e[0]?0:1}return f=b(e),m=V[f]=L[f](e),{c(){t=a("div"),y(r.$$.fragment),s=o(),y(n.$$.fragment),c=o(),m.c(),h=x()},l(e){t=i(e,"DIV",{});var a=l(t);E(r.$$.fragment,a),s=d(a),E(n.$$.fragment,a),a.forEach(u),c=d(e),m.l(e),h=x()},m(e,a){$(e,t,a),w(r,t,null),p(t,s),w(n,t,null),$(e,c,a),V[f].m(e,a),$(e,h,a),I=!0},p(e,t){const s={};1&t&&(s.variant="login"===e[0]?"secondary":"primary"),4194304&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s);const a={};1&t&&(a.variant="register"===e[0]?"secondary":"primary"),4194304&t&&(a.$$scope={dirty:t,ctx:e}),n.$set(a);let o=f;f=b(e),f===o?V[f].p(e,t):(D(),v(V[o],1,1,(()=>{V[o]=null})),k(),m=V[f],m?m.p(e,t):(m=V[f]=L[f](e),m.c()),g(m,1),m.m(h.parentNode,h))},i(e){I||(g(r.$$.fragment,e),g(n.$$.fragment,e),g(m),I=!0)},o(e){v(r.$$.fragment,e),v(n.$$.fragment,e),v(m),I=!1},d(e){e&&u(t),P(r),P(n),e&&u(c),V[f].d(e),e&&u(h)}}}function te(e){let t,r;return t=new S({props:{title:"login"===e[0]?"Login":"Register",$$slots:{default:[ee]},$$scope:{ctx:e}}}),{c(){y(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){w(t,e,s),r=!0},p(e,[r]){const s={};1&r&&(s.title="login"===e[0]?"Login":"Register"),4194367&r&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){v(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function re(e,t,r){let s,a,n;I(e,F,(e=>r(17,s=e))),I(e,z,(e=>r(19,n=e)));var o=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(t){n(t)}}function i(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}l((s=s.apply(e,t||[])).next())}))};let{authMode:i="login"}=t,l=null;const c=L("store");I(e,c,(e=>r(18,a=e)));let u="",d="",f="",$="";function p(e){return o(this,void 0,void 0,(function*(){try{const t=yield e.user.getIdToken();yield fetch("auth/login",{method:"post",headers:{Authorization:t}});let r=yield N(R(j(a.firestore,"users"),e.user.uid));V(z,n.user=r.data(),n),V(z,n.user.id=e.user.uid,n),V(F,s=!1,s),yield M("/")}catch(t){V(F,s=!1,s),r(1,l=t)}}))}return e.$$set=e=>{"authMode"in e&&r(0,i=e.authMode)},[i,l,u,d,f,$,c,function(){return o(this,void 0,void 0,(function*(){if(V(F,s=!0,s),u&&f)try{V(F,s=!0,s);p(yield b(a.auth,u,f))}catch(e){V(F,s=!1,s),r(1,l=e)}else r(1,l="Please fill out all fields")}))},function(){return o(this,void 0,void 0,(function*(){if(u&&f&&$&&d)if(f===$)try{const e=yield B(a.auth,u,f);yield T(R(a.firestore,"users"),{name:d,email:u}),p(e)}catch(e){V(F,s=!1,s),r(1,l=e)}else r(1,l="Passwords do not match");else r(1,l="Please fill out all fields")}))},()=>r(0,i="login"),()=>r(0,i="register"),function(){u=this.value,r(2,u)},function(){f=this.value,r(4,f)},function(){d=this.value,r(3,d)},function(){u=this.value,r(2,u)},function(){f=this.value,r(4,f)},function(){$=this.value,r(5,$)}]}class se extends e{constructor(e){super(),t(this,e,re,te,r,{authMode:0})}}function ae(e){let t,r,s,f,h,I,L,x=e[1].user?" "+e[1].user.name:"";return I=new se({}),{c(){t=a("h2"),r=n(e[0]),s=n(x),f=n("!"),h=o(),y(I.$$.fragment)},l(a){t=i(a,"H2",{});var n=l(t);r=c(n,e[0]),s=c(n,x),f=c(n,"!"),n.forEach(u),h=d(a),E(I.$$.fragment,a)},m(e,a){$(e,t,a),p(t,r),p(t,s),p(t,f),$(e,h,a),w(I,e,a),L=!0},p(e,[t]){(!L||1&t)&&m(r,e[0]),(!L||2&t)&&x!==(x=e[1].user?" "+e[1].user.name:"")&&m(s,x)},i(e){L||(g(I.$$.fragment,e),L=!0)},o(e){v(I.$$.fragment,e),L=!1},d(e){e&&u(t),e&&u(h),P(I,e)}}}const ne=({session:e})=>({props:{message:"Hello"}});function oe(e,t,r){let s;I(e,z,(e=>r(1,s=e)));let{message:a}=t;return e.$$set=e=>{"message"in e&&r(0,a=e.message)},[a,s]}export default class extends e{constructor(e){super(),t(this,e,oe,ae,r,{message:0})}}export{ne as load};
