import {respond} from "@sveltejs/kit/ssr";
import {create_ssr_component, validate_component, missing_component, escape, null_to_empty, add_attribute, subscribe, each} from "svelte/internal";
import {setContext, afterUpdate, onMount, getContext} from "svelte";
import * as cookie from "cookie";
import {getLinkPreview} from "link-preview-js";
import cloudinary from "cloudinary/lib/v2/index.js";
import dotenv from "dotenv";
import admin from "firebase-admin";
import {writable} from "svelte/store";
import {__extends, __assign, __values, __read, __awaiter as __awaiter$7, __generator, __spreadArray} from "tslib";
import {getAuth} from "@firebase/auth";
import {getFirestore} from "@firebase/firestore";
var root_svelte_svelte_type_style_lang = "#svelte-announcer.svelte-1j55zn5{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}";
const css$a = {
  code: "#svelte-announcer.svelte-1j55zn5{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}",
  map: `{"version":3,"file":"root.svelte","sources":["root.svelte"],"sourcesContent":["<!-- This file is generated by @sveltejs/kit \u2014 do not edit it! -->\\n<script>\\n\\timport { setContext, afterUpdate, onMount } from 'svelte';\\n\\n\\t// stores\\n\\texport let stores;\\n\\texport let page;\\n\\n\\texport let components;\\n\\texport let props_0 = null;\\n\\texport let props_1 = null;\\n\\texport let props_2 = null;\\n\\texport let props_3 = null;\\n\\n\\tsetContext('__svelte__', stores);\\n\\n\\t$: stores.page.set(page);\\n\\tafterUpdate(stores.page.notify);\\n\\n\\tlet mounted = false;\\n\\tlet navigated = false;\\n\\tlet title = null;\\n\\n\\tonMount(() => {\\n\\t\\tconst unsubscribe = stores.page.subscribe(() => {\\n\\t\\t\\tif (mounted) {\\n\\t\\t\\t\\tnavigated = true;\\n\\t\\t\\t\\ttitle = document.title || 'untitled page';\\n\\t\\t\\t}\\n\\t\\t});\\n\\n\\t\\tmounted = true;\\n\\t\\treturn unsubscribe;\\n\\t});\\n</script>\\n\\n<svelte:component this={components[0]} {...(props_0 || {})}>\\n\\t{#if components[1]}\\n\\t\\t<svelte:component this={components[1]} {...(props_1 || {})}>\\n\\t\\t\\t{#if components[2]}\\n\\t\\t\\t\\t<svelte:component this={components[2]} {...(props_2 || {})}>\\n\\t\\t\\t\\t\\t{#if components[3]}\\n\\t\\t\\t\\t\\t\\t<svelte:component this={components[3]} {...(props_3 || {})}/>\\n\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t</svelte:component>\\n\\t\\t\\t{/if}\\n\\t\\t</svelte:component>\\n\\t{/if}\\n</svelte:component>\\n\\n{#if mounted}\\n\\t<div id=\\"svelte-announcer\\" aria-live=\\"assertive\\" aria-atomic=\\"true\\">\\n\\t\\t{#if navigated}\\n\\t\\t\\t{title}\\n\\t\\t{/if}\\n\\t</div>\\n{/if}\\n\\n<style>\\n\\t#svelte-announcer {\\n\\t\\tposition: absolute;\\n\\t\\tleft: 0;\\n\\t\\ttop: 0;\\n\\t\\tclip: rect(0 0 0 0);\\n\\t\\tclip-path: inset(50%);\\n\\t\\toverflow: hidden;\\n\\t\\twhite-space: nowrap;\\n\\t\\twidth: 1px;\\n\\t\\theight: 1px;\\n\\t}\\n</style>"],"names":[],"mappings":"AA2DC,iBAAiB,eAAC,CAAC,AAClB,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,CAAC,CACP,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACnB,SAAS,CAAE,MAAM,GAAG,CAAC,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,GAAG,AACZ,CAAC"}`
};
const Root = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let {stores} = $$props;
  let {page} = $$props;
  let {components} = $$props;
  let {props_0 = null} = $$props;
  let {props_1 = null} = $$props;
  let {props_2 = null} = $$props;
  let {props_3 = null} = $$props;
  setContext("__svelte__", stores);
  afterUpdate(stores.page.notify);
  let mounted = false;
  let navigated = false;
  let title = null;
  onMount(() => {
    const unsubscribe = stores.page.subscribe(() => {
      if (mounted) {
        navigated = true;
        title = document.title || "untitled page";
      }
    });
    mounted = true;
    return unsubscribe;
  });
  if ($$props.stores === void 0 && $$bindings.stores && stores !== void 0)
    $$bindings.stores(stores);
  if ($$props.page === void 0 && $$bindings.page && page !== void 0)
    $$bindings.page(page);
  if ($$props.components === void 0 && $$bindings.components && components !== void 0)
    $$bindings.components(components);
  if ($$props.props_0 === void 0 && $$bindings.props_0 && props_0 !== void 0)
    $$bindings.props_0(props_0);
  if ($$props.props_1 === void 0 && $$bindings.props_1 && props_1 !== void 0)
    $$bindings.props_1(props_1);
  if ($$props.props_2 === void 0 && $$bindings.props_2 && props_2 !== void 0)
    $$bindings.props_2(props_2);
  if ($$props.props_3 === void 0 && $$bindings.props_3 && props_3 !== void 0)
    $$bindings.props_3(props_3);
  $$result.css.add(css$a);
  {
    stores.page.set(page);
  }
  return `


${validate_component(components[0] || missing_component, "svelte:component").$$render($$result, Object.assign(props_0 || {}), {}, {
    default: () => `${components[1] ? `${validate_component(components[1] || missing_component, "svelte:component").$$render($$result, Object.assign(props_1 || {}), {}, {
      default: () => `${components[2] ? `${validate_component(components[2] || missing_component, "svelte:component").$$render($$result, Object.assign(props_2 || {}), {}, {
        default: () => `${components[3] ? `${validate_component(components[3] || missing_component, "svelte:component").$$render($$result, Object.assign(props_3 || {}), {}, {})}` : ``}`
      })}` : ``}`
    })}` : ``}`
  })}

${mounted ? `<div id="${"svelte-announcer"}" aria-live="${"assertive"}" aria-atomic="${"true"}" class="${"svelte-1j55zn5"}">${navigated ? `${escape(title)}` : ``}</div>` : ``}`;
});
function set_paths(paths) {
}
function set_prerendering(value) {
}
dotenv.config();
const serviceAccount = {
  type: "service_account",
  project_id: "winepottle",
  private_key_id: process.env["FIREBASE_API_KEY"],
  private_key: process.env["FIREBASE_ADMIN_PRIVATE_KEY"].replace(/\\n/g, "\n"),
  client_email: process.env["FIREBASE_ADMIN_CLIENT_EMAIL"],
  client_id: process.env["FIREBASE_ADMIN_CLIENT_ID"],
  auth_uri: "https://accounts.google.com/o/oauth2/auth",
  token_uri: "https://oauth2.googleapis.com/token",
  auth_provider_x509_cert_url: "https://www.googleapis.com/oauth2/v1/certs",
  client_x509_cert_url: process.env["FIREBASE_ADMIN_CLIENT_CERT_URL"]
};
if (!admin.apps.length) {
  admin.initializeApp({
    credential: admin.credential.cert(serviceAccount)
  });
}
const firestore = admin.firestore();
const auth = admin.auth();
const handle = async ({request, render: render2}) => {
  var _a2, _b;
  try {
    const cookies = cookie.parse(((_a2 = request.headers) == null ? void 0 : _a2.cookie) || "");
    let idToken = cookies.jwt;
    if (!idToken) {
      idToken = (_b = request.headers) == null ? void 0 : _b.authorization;
    }
    if (idToken) {
      const decodedToken = await auth.verifyIdToken(idToken);
      console.log("Current user: " + decodedToken.email);
      request.locals.user = decodedToken;
    } else
      console.log("No cookie or auth header");
    const venueId = cookies.venueId;
    if (venueId) {
      request.locals.venueId = venueId;
    }
    return await render2(request);
  } catch (err) {
    console.log("Handle error:");
    console.log(err);
  }
};
const getSession = async (request) => {
  var _a2, _b;
  try {
    let user = null;
    let venue = null;
    if (request.locals.user) {
      const userProfile = await firestore.collection("users").doc((_a2 = request.locals.user) == null ? void 0 : _a2.uid).get();
      user = {
        id: request.locals.user.uid,
        name: userProfile.data().name,
        email: (_b = request.locals.user) == null ? void 0 : _b.email
      };
    }
    if (request.locals.venueId) {
      const doc = await firestore.collection("venues").doc(request.locals.venueId).get();
      venue = {id: doc.id, name: doc.data().name, route: doc.data().route};
    }
    return {
      user,
      venue
    };
  } catch (err) {
    console.log("getSession error:");
    console.log(err);
  }
};
var user_hooks = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  handle,
  getSession
});
const template = ({head, body}) => '<!DOCTYPE html>\n<html lang="en">\n	<head>\n		<meta charset="utf-8" />\n		<link rel="icon" href="/favicon.ico" />\n		<meta name="viewport" content="width=device-width, initial-scale=1" />\n		' + head + '\n	</head>\n	<body>\n		<div id="svelte">' + body + "</div>\n	</body>\n</html>\n";
let options = null;
function init(settings) {
  set_paths(settings.paths);
  set_prerendering(settings.prerendering || false);
  options = {
    amp: false,
    dev: false,
    entry: {
      file: "/./_app/start-f62d353b.js",
      css: ["/./_app/assets/start-a8cd1609.css"],
      js: ["/./_app/start-f62d353b.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/singletons-bb9012b7.js"]
    },
    fetched: void 0,
    floc: false,
    get_component_path: (id) => "/./_app/" + entry_lookup[id],
    get_stack: (error2) => String(error2),
    handle_error: (error2) => {
      console.error(error2.stack);
      error2.stack = options.get_stack(error2);
    },
    hooks: get_hooks(user_hooks),
    hydrate: true,
    initiator: void 0,
    load_component,
    manifest,
    paths: settings.paths,
    read: settings.read,
    root: Root,
    router: true,
    ssr: true,
    target: "#svelte",
    template,
    trailing_slash: "never"
  };
}
const d = decodeURIComponent;
const empty = () => ({});
const manifest = {
  assets: [],
  layout: "src/routes/__layout.svelte",
  error: "src/routes/__error.svelte",
  routes: [
    {
      type: "page",
      pattern: /^\/$/,
      params: empty,
      a: ["src/routes/__layout.svelte", "src/routes/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "endpoint",
      pattern: /^\/articles\.json$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return index_json$3;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/articles\/preview\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return preview;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/images\/upload\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return upload;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/images\/venues\/([^/]+?)\.json$/,
      params: (m) => ({venue: d(m[1])}),
      load: () => Promise.resolve().then(function() {
        return _venue__json;
      })
    },
    {
      type: "page",
      pattern: /^\/logout\/?$/,
      params: empty,
      a: ["src/routes/__layout.svelte", "src/routes/logout.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "endpoint",
      pattern: /^\/venues\.json$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return index_json$2;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/venues\/create\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return create$1;
      })
    },
    {
      type: "page",
      pattern: /^\/venues\/create\/?$/,
      params: empty,
      a: ["src/routes/__layout.svelte", "src/routes/venues/create.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "endpoint",
      pattern: /^\/venues\/enter\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return enter;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/venues\/leave\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return leave;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/venues\/join\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return join$1;
      })
    },
    {
      type: "page",
      pattern: /^\/venues\/join\/?$/,
      params: empty,
      a: ["src/routes/__layout.svelte", "src/routes/venues/join.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "endpoint",
      pattern: /^\/venues\/([^/]+?)\.json$/,
      params: (m) => ({id: d(m[1])}),
      load: () => Promise.resolve().then(function() {
        return _id__json$1;
      })
    },
    {
      type: "page",
      pattern: /^\/venues\/([^/]+?)\/?$/,
      params: (m) => ({venue: d(m[1])}),
      a: ["src/routes/__layout.svelte", "src/routes/venues/[venue]/__layout.svelte", "src/routes/venues/[venue]/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "page",
      pattern: /^\/venues\/([^/]+?)\/articles\/?$/,
      params: (m) => ({venue: d(m[1])}),
      a: ["src/routes/__layout.svelte", "src/routes/venues/[venue]/__layout.svelte", "src/routes/venues/[venue]/articles/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "page",
      pattern: /^\/venues\/([^/]+?)\/gallery\/?$/,
      params: (m) => ({venue: d(m[1])}),
      a: ["src/routes/__layout.svelte", "src/routes/venues/[venue]/__layout.svelte", "src/routes/venues/[venue]/gallery/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "page",
      pattern: /^\/venues\/([^/]+?)\/reading\/?$/,
      params: (m) => ({venue: d(m[1])}),
      a: ["src/routes/__layout.svelte", "src/routes/venues/[venue]/__layout.svelte", "src/routes/venues/[venue]/reading/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "page",
      pattern: /^\/venues\/([^/]+?)\/lists\/?$/,
      params: (m) => ({venue: d(m[1])}),
      a: ["src/routes/__layout.svelte", "src/routes/venues/[venue]/__layout.svelte", "src/routes/venues/[venue]/lists/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "page",
      pattern: /^\/venues\/([^/]+?)\/posts\/?$/,
      params: (m) => ({venue: d(m[1])}),
      a: ["src/routes/__layout.svelte", "src/routes/venues/[venue]/__layout.svelte", "src/routes/venues/[venue]/posts/index.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "endpoint",
      pattern: /^\/lists\.json$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return index_json$1;
      })
    },
    {
      type: "page",
      pattern: /^\/login\/?$/,
      params: empty,
      a: ["src/routes/__layout.svelte", "src/routes/login.svelte"],
      b: ["src/routes/__error.svelte"]
    },
    {
      type: "endpoint",
      pattern: /^\/posts\.json$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return index_json;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/users\/([^/]+?)\.json$/,
      params: (m) => ({id: d(m[1])}),
      load: () => Promise.resolve().then(function() {
        return _id__json;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/auth\/logout\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return logout$1;
      })
    },
    {
      type: "endpoint",
      pattern: /^\/auth\/login\/?$/,
      params: empty,
      load: () => Promise.resolve().then(function() {
        return login$1;
      })
    }
  ]
};
const get_hooks = (hooks) => ({
  getSession: hooks.getSession || (() => ({})),
  handle: hooks.handle || (({request, render: render2}) => render2(request))
});
const module_lookup = {
  "src/routes/__layout.svelte": () => Promise.resolve().then(function() {
    return __layout$1;
  }),
  "src/routes/__error.svelte": () => Promise.resolve().then(function() {
    return __error;
  }),
  "src/routes/index.svelte": () => Promise.resolve().then(function() {
    return index$6;
  }),
  "src/routes/logout.svelte": () => Promise.resolve().then(function() {
    return logout;
  }),
  "src/routes/venues/create.svelte": () => Promise.resolve().then(function() {
    return create;
  }),
  "src/routes/venues/join.svelte": () => Promise.resolve().then(function() {
    return join;
  }),
  "src/routes/venues/[venue]/__layout.svelte": () => Promise.resolve().then(function() {
    return __layout;
  }),
  "src/routes/venues/[venue]/index.svelte": () => Promise.resolve().then(function() {
    return index$5;
  }),
  "src/routes/venues/[venue]/articles/index.svelte": () => Promise.resolve().then(function() {
    return index$4;
  }),
  "src/routes/venues/[venue]/gallery/index.svelte": () => Promise.resolve().then(function() {
    return index$3;
  }),
  "src/routes/venues/[venue]/reading/index.svelte": () => Promise.resolve().then(function() {
    return index$2;
  }),
  "src/routes/venues/[venue]/lists/index.svelte": () => Promise.resolve().then(function() {
    return index$1;
  }),
  "src/routes/venues/[venue]/posts/index.svelte": () => Promise.resolve().then(function() {
    return index;
  }),
  "src/routes/login.svelte": () => Promise.resolve().then(function() {
    return login;
  })
};
const metadata_lookup = {"src/routes/__layout.svelte": {"entry": "/./_app/pages/__layout.svelte-603626e1.js", "css": ["/./_app/assets/pages/__layout.svelte-c90da791.css", "/./_app/assets/Button-398cc11c.css"], "js": ["/./_app/pages/__layout.svelte-603626e1.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/navigation-20968cc5.js", "/./_app/chunks/singletons-bb9012b7.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/stores-c6b7a22b.js"], "styles": null}, "src/routes/__error.svelte": {"entry": "/./_app/pages/__error.svelte-b22f2786.js", "css": [], "js": ["/./_app/pages/__error.svelte-b22f2786.js", "/./_app/chunks/vendor-494dde6f.js"], "styles": null}, "src/routes/index.svelte": {"entry": "/./_app/pages/index.svelte-5d066e1a.js", "css": ["/./_app/assets/pages/index.svelte-e8a607c7.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/index.svelte-5d066e1a.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/ErrorAlert-7d139505.js", "/./_app/chunks/stores-3eb657b5.js"], "styles": null}, "src/routes/logout.svelte": {"entry": "/./_app/pages/logout.svelte-23fb0c60.js", "css": [], "js": ["/./_app/pages/logout.svelte-23fb0c60.js", "/./_app/chunks/vendor-494dde6f.js"], "styles": null}, "src/routes/venues/create.svelte": {"entry": "/./_app/pages/venues/create.svelte-4557e4e0.js", "css": ["/./_app/assets/Button-398cc11c.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/venues/create.svelte-4557e4e0.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/navigation-20968cc5.js", "/./_app/chunks/singletons-bb9012b7.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/ErrorAlert-7d139505.js"], "styles": null}, "src/routes/venues/join.svelte": {"entry": "/./_app/pages/venues/join.svelte-e0735c7e.js", "css": ["/./_app/assets/Button-398cc11c.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/venues/join.svelte-e0735c7e.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/ErrorAlert-7d139505.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/navigation-20968cc5.js", "/./_app/chunks/singletons-bb9012b7.js"], "styles": null}, "src/routes/venues/[venue]/__layout.svelte": {"entry": "/./_app/pages/venues/[venue]/__layout.svelte-94abdf0d.js", "css": ["/./_app/assets/pages/venues/[venue]/__layout.svelte-49be5634.css"], "js": ["/./_app/pages/venues/[venue]/__layout.svelte-94abdf0d.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/stores-3eb657b5.js"], "styles": null}, "src/routes/venues/[venue]/index.svelte": {"entry": "/./_app/pages/venues/[venue]/index.svelte-80ce17da.js", "css": [], "js": ["/./_app/pages/venues/[venue]/index.svelte-80ce17da.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/stores-3eb657b5.js"], "styles": null}, "src/routes/venues/[venue]/articles/index.svelte": {"entry": "/./_app/pages/venues/[venue]/articles/index.svelte-ec425107.js", "css": ["/./_app/assets/pages/venues/[venue]/articles/index.svelte-e27b47ed.css", "/./_app/assets/Button-398cc11c.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/venues/[venue]/articles/index.svelte-ec425107.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/utils-ccc08853.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/ErrorAlert-7d139505.js", "/./_app/chunks/stores-3eb657b5.js"], "styles": null}, "src/routes/venues/[venue]/gallery/index.svelte": {"entry": "/./_app/pages/venues/[venue]/gallery/index.svelte-5a6db565.js", "css": ["/./_app/assets/pages/venues/[venue]/gallery/index.svelte-b2586ffd.css", "/./_app/assets/Button-398cc11c.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/venues/[venue]/gallery/index.svelte-5a6db565.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/ErrorAlert-7d139505.js"], "styles": null}, "src/routes/venues/[venue]/reading/index.svelte": {"entry": "/./_app/pages/venues/[venue]/reading/index.svelte-d1dcf206.js", "css": [], "js": ["/./_app/pages/venues/[venue]/reading/index.svelte-d1dcf206.js", "/./_app/chunks/vendor-494dde6f.js"], "styles": null}, "src/routes/venues/[venue]/lists/index.svelte": {"entry": "/./_app/pages/venues/[venue]/lists/index.svelte-9815f908.js", "css": ["/./_app/assets/pages/venues/[venue]/lists/index.svelte-7efc5826.css", "/./_app/assets/Button-398cc11c.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/venues/[venue]/lists/index.svelte-9815f908.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/utils-ccc08853.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/ErrorAlert-7d139505.js"], "styles": null}, "src/routes/venues/[venue]/posts/index.svelte": {"entry": "/./_app/pages/venues/[venue]/posts/index.svelte-7fcedcbc.js", "css": ["/./_app/assets/pages/venues/[venue]/posts/index.svelte-25844008.css", "/./_app/assets/Card.svelte_svelte&type=style&lang-8d10bf93.css", "/./_app/assets/Button-398cc11c.css", "/./_app/assets/ErrorAlert-097a28a2.css"], "js": ["/./_app/pages/venues/[venue]/posts/index.svelte-7fcedcbc.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/ErrorAlert-7d139505.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/utils-ccc08853.js"], "styles": null}, "src/routes/login.svelte": {"entry": "/./_app/pages/login.svelte-75efe288.js", "css": ["/./_app/assets/Card.svelte_svelte&type=style&lang-8d10bf93.css", "/./_app/assets/ErrorAlert-097a28a2.css", "/./_app/assets/Button-398cc11c.css"], "js": ["/./_app/pages/login.svelte-75efe288.js", "/./_app/chunks/vendor-494dde6f.js", "/./_app/chunks/navigation-20968cc5.js", "/./_app/chunks/singletons-bb9012b7.js", "/./_app/chunks/ErrorAlert-7d139505.js", "/./_app/chunks/Button-fbe70615.js", "/./_app/chunks/stores-3eb657b5.js", "/./_app/chunks/stores-c6b7a22b.js"], "styles": null}};
async function load_component(file) {
  return {
    module: await module_lookup[file](),
    ...metadata_lookup[file]
  };
}
init({paths: {"base": "", "assets": "/."}});
function render(request, {
  prerender
} = {}) {
  const host = request.headers["host"];
  return respond({...request, host}, options, {prerender});
}
async function post$9({body}) {
  try {
    const {userId, venueId, href, datetime} = body;
    const ref = await firestore.collection("articles").add({
      userId,
      venueId,
      href,
      datetime
    });
    return {
      body: {
        id: ref.id
      }
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
async function get$7({query}) {
  try {
    const venueId = query.get("venueId");
    const snapshot = await firestore.collection("articles").where("venueId", "==", venueId).get();
    let articles = [];
    for (let doc of snapshot.docs) {
      let article = doc.data();
      article.datetime = new Date(article.datetime);
      article.preview = await getLinkPreview(article.href);
      articles.push(article);
    }
    return {
      body: articles
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
var index_json$3 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$9,
  get: get$7
});
async function post$8({body}) {
  try {
    const url = body.url;
    const preview2 = await getLinkPreview(url);
    return {
      body: preview2
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
var preview = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$8
});
async function post$7(request) {
  try {
    await fetch(`https://api.cloudinary.com/v1_1/${"dkj7bctqg"}/image/upload`, {
      method: "post",
      body: request.body
    });
    return {
      body: {
        ok: true
      }
    };
  } catch (err) {
    return {
      status: 500
    };
  }
}
var upload = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$7
});
dotenv.config();
cloudinary.config({
  cloud_name: "dkj7bctqg",
  api_key: process.env["CLOUDINARY_API_KEY"],
  api_secret: process.env["CLOUDINARY_API_SECRET"]
});
async function get$6({params, query}) {
  const venue = params.venue;
  const next = query.get("next");
  try {
    const gallery = await cloudinary.api.resources_by_tag(venue, {
      max_results: 5,
      next_cursor: next
    });
    return {
      body: JSON.stringify(gallery)
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
var _venue__json = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get: get$6
});
async function get$5(request) {
  const {query} = request;
  const venues = [];
  const venueSnapshot = await firestore.collection("venues").get();
  venueSnapshot.forEach((doc) => venues.push({
    id: doc.id,
    name: doc.data().name,
    route: doc.data().route
  }));
  if (query.get("userId")) {
    const userVenueMemberships = [];
    const uvmSnapshot = await firestore.collection("venueMembers").where("userId", "==", query.get("userId")).get();
    if (!uvmSnapshot.empty)
      uvmSnapshot.forEach((doc) => userVenueMemberships.push({
        id: doc.id,
        venueId: doc.data().venueId,
        userId: doc.data().userId
      }));
    return {
      body: {
        venues,
        userVenueMemberships
      }
    };
  }
  return {
    body: {
      venues
    }
  };
}
var index_json$2 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get: get$5
});
async function post$6({
  body
}) {
  try {
    const {name: name2, userId, password} = body;
    const route = encodeURIComponent(name2.toLowerCase().split(" ").join("-"));
    const venueRef = await firestore.collection("venues").add({
      name: name2,
      password,
      route
    });
    await firestore.collection("venueMembers").add({
      venueId: venueRef.id,
      userId
    });
    return {
      status: 200,
      body: {
        id: venueRef.id,
        route
      }
    };
  } catch (err) {
    return {
      status: 500,
      body: {
        errors: err
      }
    };
  }
}
var create$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$6
});
async function get$4({query}) {
  const venueId = query.get("venueId");
  const route = query.get("route");
  return {
    headers: {
      "set-cookie": `venueId=${venueId}; Path=/; HttpOnly`,
      "location": route
    },
    status: 308
  };
}
var enter = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get: get$4
});
function post$5() {
  return {
    headers: {
      "set-cookie": "venueId=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"
    },
    body: {
      ok: true
    }
  };
}
var leave = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$5
});
async function post$4(request) {
  try {
    const doc = await firestore.collection("venues").doc(request.body.venueId).get();
    const venue = {
      id: doc.id,
      name: doc.data().name,
      route: doc.data().route,
      password: doc.data().password
    };
    if (venue.password === request.body.password) {
      await firestore.collection("venues").add({
        venueId: venue.id,
        userId: request.body.userId
      });
      return {
        status: 200,
        headers: {
          "set-cookie": `venueId=${venue.id}; Path=/; HttpOnly`
        },
        body: {
          ok: true
        }
      };
    } else {
      return {
        status: 504,
        body: {
          errors: "Incorrect password"
        }
      };
    }
  } catch (err) {
    return {
      status: 500,
      body: {
        errors: err
      }
    };
  }
}
var join$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$4
});
async function get$3(request) {
  try {
    const {params} = request;
    const {id} = params;
    const resp = await firestore.doc(id).get();
    const venue = {
      id: resp.id,
      name: resp.data().name,
      route: resp.data().route
    };
    return {
      body: {
        venue
      }
    };
  } catch (err) {
    return {
      status: 404
    };
  }
}
var _id__json$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get: get$3
});
async function get$2({query}) {
  try {
    const venueId = query.get("venueId");
    const snapshot = await firestore.collection("wineLists").where("venueId", "==", venueId).get();
    const wineLists = [];
    if (!snapshot.empty) {
      for (let doc of snapshot.docs) {
        wineLists.push(doc.data());
      }
    }
    return {
      body: wineLists
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
async function post$3({body}) {
  try {
    const ref = await firestore.collection("wineLists").add(body);
    return {
      body: {
        id: ref.id
      }
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
var index_json$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get: get$2,
  post: post$3
});
async function get$1({query}) {
  try {
    const venueId = query.get("venueId");
    const snapshot = await firestore.collection("posts").where("venueId", "==", venueId).get();
    const posts = [];
    if (!snapshot.empty) {
      for (let doc of snapshot.docs) {
        posts.push(doc.data());
      }
    }
    return {
      body: posts
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
async function post$2({body}) {
  try {
    const response = await firestore.collection("posts").add(body);
    return {
      body: {
        postId: response.id
      }
    };
  } catch (err) {
    return {
      body: {
        errors: err
      }
    };
  }
}
var index_json = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get: get$1,
  post: post$2
});
async function get(request) {
  try {
    const {params} = request;
    const {id} = params;
    const resp = await firestore.doc(id).get();
    const user = {
      id: resp.id,
      name: resp.get("name"),
      email: resp.get("email")
    };
    return {
      body: user
    };
  } catch (err) {
    return {
      status: 404
    };
  }
}
var _id__json = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  get
});
async function post$1() {
  return {
    headers: {
      "set-cookie": ["jwt=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT", "venueId=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"]
    },
    body: {
      message: "Deleting cookies"
    }
  };
}
var logout$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post: post$1
});
function post({headers}) {
  const idToken = headers.authorization;
  return {
    status: 200,
    headers: {
      "set-cookie": `jwt=${idToken}; Path=/; HttpOnly`
    },
    body: {
      message: "Cookie set"
    }
  };
}
var login$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  post
});
const ssr = typeof window === "undefined";
const getStores = () => {
  const stores = getContext("__svelte__");
  return {
    page: {
      subscribe: stores.page.subscribe
    },
    navigating: {
      subscribe: stores.navigating.subscribe
    },
    get preloading() {
      console.error("stores.preloading is deprecated; use stores.navigating instead");
      return {
        subscribe: stores.navigating.subscribe
      };
    },
    session: stores.session
  };
};
const error = (verb) => {
  throw new Error(ssr ? `Can only ${verb} session store in browser` : `Cannot ${verb} session store before subscribing`);
};
const session = {
  subscribe(fn) {
    const store = getStores().session;
    if (!ssr) {
      session.set = store.set;
      session.update = store.update;
    }
    return store.subscribe(fn);
  },
  set: (value) => {
    error("set");
  },
  update: (updater) => {
    error("update");
  }
};
var Button_svelte_svelte_type_style_lang = "button.svelte-qk5r0g{padding:5px 10px;background-color:darkgray;border:none;color:white;border-radius:2px;cursor:pointer;font-size:18px}.primary.svelte-qk5r0g{background-color:cornflowerblue}.secondary.svelte-qk5r0g{background-color:darkcyan}.danger.svelte-qk5r0g{background-color:tomato}";
const css$9 = {
  code: "button.svelte-qk5r0g{padding:5px 10px;background-color:darkgray;border:none;color:white;border-radius:2px;cursor:pointer;font-size:18px}.primary.svelte-qk5r0g{background-color:cornflowerblue}.secondary.svelte-qk5r0g{background-color:darkcyan}.danger.svelte-qk5r0g{background-color:tomato}",
  map: `{"version":3,"file":"Button.svelte","sources":["Button.svelte"],"sourcesContent":["<!-- ****** Logic ****** -->\\r\\n<script lang=\\"ts\\">export let variant = 'primary';\\r\\nexport let type = 'button';\\r\\n</script>\\r\\n\\r\\n<!-- ****** Styling ****** -->\\r\\n<style>\\r\\n    button {\\r\\n        padding: 5px 10px;\\r\\n        background-color: darkgray;\\r\\n        border: none;\\r\\n        color: white;\\r\\n        border-radius: 2px;\\r\\n        cursor: pointer;\\r\\n        font-size: 18px;\\r\\n    }\\r\\n    .primary {\\r\\n        background-color: cornflowerblue;\\r\\n    }\\r\\n    .secondary {\\r\\n        background-color: darkcyan;\\r\\n    }\\r\\n    .danger {\\r\\n        background-color: tomato;\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<!-- ****** Markup ****** -->\\r\\n<button class={variant} {type} on:click>\\r\\n    <slot></slot>\\r\\n</button>"],"names":[],"mappings":"AAOI,MAAM,cAAC,CAAC,AACJ,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,gBAAgB,CAAE,QAAQ,CAC1B,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,KAAK,CACZ,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,IAAI,AACnB,CAAC,AACD,QAAQ,cAAC,CAAC,AACN,gBAAgB,CAAE,cAAc,AACpC,CAAC,AACD,UAAU,cAAC,CAAC,AACR,gBAAgB,CAAE,QAAQ,AAC9B,CAAC,AACD,OAAO,cAAC,CAAC,AACL,gBAAgB,CAAE,MAAM,AAC5B,CAAC"}`
};
const Button = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let {variant = "primary"} = $$props;
  let {type = "button"} = $$props;
  if ($$props.variant === void 0 && $$bindings.variant && variant !== void 0)
    $$bindings.variant(variant);
  if ($$props.type === void 0 && $$bindings.type && type !== void 0)
    $$bindings.type(type);
  $$result.css.add(css$9);
  return `






<button class="${escape(null_to_empty(variant)) + " svelte-qk5r0g"}"${add_attribute("type", type, 0)}>${slots.default ? slots.default({}) : ``}</button>`;
});
const loading = writable(false);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Deferred = function() {
  function Deferred2() {
    var _this = this;
    this.reject = function() {
    };
    this.resolve = function() {
    };
    this.promise = new Promise(function(resolve, reject) {
      _this.resolve = resolve;
      _this.reject = reject;
    });
  }
  Deferred2.prototype.wrapCallback = function(callback) {
    var _this = this;
    return function(error2, value) {
      if (error2) {
        _this.reject(error2);
      } else {
        _this.resolve(value);
      }
      if (typeof callback === "function") {
        _this.promise.catch(function() {
        });
        if (callback.length === 1) {
          callback(error2);
        } else {
          callback(error2, value);
        }
      }
    };
  };
  return Deferred2;
}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ERROR_NAME = "FirebaseError";
var FirebaseError = function(_super) {
  __extends(FirebaseError2, _super);
  function FirebaseError2(code, message, customData) {
    var _this = _super.call(this, message) || this;
    _this.code = code;
    _this.customData = customData;
    _this.name = ERROR_NAME;
    Object.setPrototypeOf(_this, FirebaseError2.prototype);
    if (Error.captureStackTrace) {
      Error.captureStackTrace(_this, ErrorFactory.prototype.create);
    }
    return _this;
  }
  return FirebaseError2;
}(Error);
var ErrorFactory = function() {
  function ErrorFactory2(service, serviceName, errors) {
    this.service = service;
    this.serviceName = serviceName;
    this.errors = errors;
  }
  ErrorFactory2.prototype.create = function(code) {
    var data = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      data[_i - 1] = arguments[_i];
    }
    var customData = data[0] || {};
    var fullCode = this.service + "/" + code;
    var template2 = this.errors[code];
    var message = template2 ? replaceTemplate(template2, customData) : "Error";
    var fullMessage = this.serviceName + ": " + message + " (" + fullCode + ").";
    var error2 = new FirebaseError(fullCode, fullMessage, customData);
    return error2;
  };
  return ErrorFactory2;
}();
function replaceTemplate(template2, data) {
  return template2.replace(PATTERN, function(_, key) {
    var value = data[key];
    return value != null ? String(value) : "<" + key + "?>";
  });
}
var PATTERN = /\{\$([^}]+)}/g;
var Component = function() {
  function Component2(name2, instanceFactory, type) {
    this.name = name2;
    this.instanceFactory = instanceFactory;
    this.type = type;
    this.multipleInstances = false;
    this.serviceProps = {};
    this.instantiationMode = "LAZY";
    this.onInstanceCreated = null;
  }
  Component2.prototype.setInstantiationMode = function(mode) {
    this.instantiationMode = mode;
    return this;
  };
  Component2.prototype.setMultipleInstances = function(multipleInstances) {
    this.multipleInstances = multipleInstances;
    return this;
  };
  Component2.prototype.setServiceProps = function(props) {
    this.serviceProps = props;
    return this;
  };
  Component2.prototype.setInstanceCreatedCallback = function(callback) {
    this.onInstanceCreated = callback;
    return this;
  };
  return Component2;
}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DEFAULT_ENTRY_NAME$1 = "[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Provider = function() {
  function Provider2(name2, container) {
    this.name = name2;
    this.container = container;
    this.component = null;
    this.instances = new Map();
    this.instancesDeferred = new Map();
  }
  Provider2.prototype.get = function(identifier) {
    if (identifier === void 0) {
      identifier = DEFAULT_ENTRY_NAME$1;
    }
    var normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);
    if (!this.instancesDeferred.has(normalizedIdentifier)) {
      var deferred = new Deferred();
      this.instancesDeferred.set(normalizedIdentifier, deferred);
      if (this.isInitialized(normalizedIdentifier) || this.shouldAutoInitialize()) {
        try {
          var instance = this.getOrInitializeService({
            instanceIdentifier: normalizedIdentifier
          });
          if (instance) {
            deferred.resolve(instance);
          }
        } catch (e) {
        }
      }
    }
    return this.instancesDeferred.get(normalizedIdentifier).promise;
  };
  Provider2.prototype.getImmediate = function(options2) {
    var _a2 = __assign({identifier: DEFAULT_ENTRY_NAME$1, optional: false}, options2), identifier = _a2.identifier, optional = _a2.optional;
    var normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);
    if (this.isInitialized(normalizedIdentifier) || this.shouldAutoInitialize()) {
      try {
        return this.getOrInitializeService({
          instanceIdentifier: normalizedIdentifier
        });
      } catch (e) {
        if (optional) {
          return null;
        } else {
          throw e;
        }
      }
    } else {
      if (optional) {
        return null;
      } else {
        throw Error("Service " + this.name + " is not available");
      }
    }
  };
  Provider2.prototype.getComponent = function() {
    return this.component;
  };
  Provider2.prototype.setComponent = function(component) {
    var e_1, _a2;
    if (component.name !== this.name) {
      throw Error("Mismatching Component " + component.name + " for Provider " + this.name + ".");
    }
    if (this.component) {
      throw Error("Component for " + this.name + " has already been provided");
    }
    this.component = component;
    if (!this.shouldAutoInitialize()) {
      return;
    }
    if (isComponentEager(component)) {
      try {
        this.getOrInitializeService({instanceIdentifier: DEFAULT_ENTRY_NAME$1});
      } catch (e) {
      }
    }
    try {
      for (var _b = __values(this.instancesDeferred.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {
        var _d = __read(_c.value, 2), instanceIdentifier = _d[0], instanceDeferred = _d[1];
        var normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);
        try {
          var instance = this.getOrInitializeService({
            instanceIdentifier: normalizedIdentifier
          });
          instanceDeferred.resolve(instance);
        } catch (e) {
        }
      }
    } catch (e_1_1) {
      e_1 = {error: e_1_1};
    } finally {
      try {
        if (_c && !_c.done && (_a2 = _b.return))
          _a2.call(_b);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
  };
  Provider2.prototype.clearInstance = function(identifier) {
    if (identifier === void 0) {
      identifier = DEFAULT_ENTRY_NAME$1;
    }
    this.instancesDeferred.delete(identifier);
    this.instances.delete(identifier);
  };
  Provider2.prototype.delete = function() {
    return __awaiter$7(this, void 0, void 0, function() {
      var services;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            services = Array.from(this.instances.values());
            return [4, Promise.all(__spreadArray(__spreadArray([], __read(services.filter(function(service) {
              return "INTERNAL" in service;
            }).map(function(service) {
              return service.INTERNAL.delete();
            }))), __read(services.filter(function(service) {
              return "_delete" in service;
            }).map(function(service) {
              return service._delete();
            }))))];
          case 1:
            _a2.sent();
            return [2];
        }
      });
    });
  };
  Provider2.prototype.isComponentSet = function() {
    return this.component != null;
  };
  Provider2.prototype.isInitialized = function(identifier) {
    if (identifier === void 0) {
      identifier = DEFAULT_ENTRY_NAME$1;
    }
    return this.instances.has(identifier);
  };
  Provider2.prototype.initialize = function(opts) {
    var e_2, _a2;
    if (opts === void 0) {
      opts = {};
    }
    var _b = opts.instanceIdentifier, instanceIdentifier = _b === void 0 ? DEFAULT_ENTRY_NAME$1 : _b, _c = opts.options, options2 = _c === void 0 ? {} : _c;
    var normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);
    if (this.isInitialized(normalizedIdentifier)) {
      throw Error(this.name + "(" + normalizedIdentifier + ") has already been initialized");
    }
    if (!this.isComponentSet()) {
      throw Error("Component " + this.name + " has not been registered yet");
    }
    var instance = this.getOrInitializeService({
      instanceIdentifier: normalizedIdentifier,
      options: options2
    });
    try {
      for (var _d = __values(this.instancesDeferred.entries()), _e = _d.next(); !_e.done; _e = _d.next()) {
        var _f = __read(_e.value, 2), instanceIdentifier_1 = _f[0], instanceDeferred = _f[1];
        var normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier_1);
        if (normalizedIdentifier === normalizedDeferredIdentifier) {
          instanceDeferred.resolve(instance);
        }
      }
    } catch (e_2_1) {
      e_2 = {error: e_2_1};
    } finally {
      try {
        if (_e && !_e.done && (_a2 = _d.return))
          _a2.call(_d);
      } finally {
        if (e_2)
          throw e_2.error;
      }
    }
    return instance;
  };
  Provider2.prototype.getOrInitializeService = function(_a2) {
    var instanceIdentifier = _a2.instanceIdentifier, _b = _a2.options, options2 = _b === void 0 ? {} : _b;
    var instance = this.instances.get(instanceIdentifier);
    if (!instance && this.component) {
      instance = this.component.instanceFactory(this.container, {
        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),
        options: options2
      });
      this.instances.set(instanceIdentifier, instance);
      if (this.component.onInstanceCreated) {
        try {
          this.component.onInstanceCreated(this.container, instanceIdentifier, instance);
        } catch (_c) {
        }
      }
    }
    return instance || null;
  };
  Provider2.prototype.normalizeInstanceIdentifier = function(identifier) {
    if (this.component) {
      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME$1;
    } else {
      return identifier;
    }
  };
  Provider2.prototype.shouldAutoInitialize = function() {
    return !!this.component && this.component.instantiationMode !== "EXPLICIT";
  };
  return Provider2;
}();
function normalizeIdentifierForFactory(identifier) {
  return identifier === DEFAULT_ENTRY_NAME$1 ? void 0 : identifier;
}
function isComponentEager(component) {
  return component.instantiationMode === "EAGER";
}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ComponentContainer = function() {
  function ComponentContainer2(name2) {
    this.name = name2;
    this.providers = new Map();
  }
  ComponentContainer2.prototype.addComponent = function(component) {
    var provider = this.getProvider(component.name);
    if (provider.isComponentSet()) {
      throw new Error("Component " + component.name + " has already been registered with " + this.name);
    }
    provider.setComponent(component);
  };
  ComponentContainer2.prototype.addOrOverwriteComponent = function(component) {
    var provider = this.getProvider(component.name);
    if (provider.isComponentSet()) {
      this.providers.delete(component.name);
    }
    this.addComponent(component);
  };
  ComponentContainer2.prototype.getProvider = function(name2) {
    if (this.providers.has(name2)) {
      return this.providers.get(name2);
    }
    var provider = new Provider(name2, this);
    this.providers.set(name2, provider);
    return provider;
  };
  ComponentContainer2.prototype.getProviders = function() {
    return Array.from(this.providers.values());
  };
  return ComponentContainer2;
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function __spreadArrays() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++)
    s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
      r[k] = a[j];
  return r;
}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _a;
var LogLevel;
(function(LogLevel2) {
  LogLevel2[LogLevel2["DEBUG"] = 0] = "DEBUG";
  LogLevel2[LogLevel2["VERBOSE"] = 1] = "VERBOSE";
  LogLevel2[LogLevel2["INFO"] = 2] = "INFO";
  LogLevel2[LogLevel2["WARN"] = 3] = "WARN";
  LogLevel2[LogLevel2["ERROR"] = 4] = "ERROR";
  LogLevel2[LogLevel2["SILENT"] = 5] = "SILENT";
})(LogLevel || (LogLevel = {}));
var levelStringToEnum = {
  "debug": LogLevel.DEBUG,
  "verbose": LogLevel.VERBOSE,
  "info": LogLevel.INFO,
  "warn": LogLevel.WARN,
  "error": LogLevel.ERROR,
  "silent": LogLevel.SILENT
};
var defaultLogLevel = LogLevel.INFO;
var ConsoleMethod = (_a = {}, _a[LogLevel.DEBUG] = "log", _a[LogLevel.VERBOSE] = "log", _a[LogLevel.INFO] = "info", _a[LogLevel.WARN] = "warn", _a[LogLevel.ERROR] = "error", _a);
var defaultLogHandler = function(instance, logType) {
  var args = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    args[_i - 2] = arguments[_i];
  }
  if (logType < instance.logLevel) {
    return;
  }
  var now = new Date().toISOString();
  var method = ConsoleMethod[logType];
  if (method) {
    console[method].apply(console, __spreadArrays(["[" + now + "]  " + instance.name + ":"], args));
  } else {
    throw new Error("Attempted to log a message with an invalid logType (value: " + logType + ")");
  }
};
var Logger = function() {
  function Logger2(name2) {
    this.name = name2;
    this._logLevel = defaultLogLevel;
    this._logHandler = defaultLogHandler;
    this._userLogHandler = null;
  }
  Object.defineProperty(Logger2.prototype, "logLevel", {
    get: function() {
      return this._logLevel;
    },
    set: function(val) {
      if (!(val in LogLevel)) {
        throw new TypeError('Invalid value "' + val + '" assigned to `logLevel`');
      }
      this._logLevel = val;
    },
    enumerable: false,
    configurable: true
  });
  Logger2.prototype.setLogLevel = function(val) {
    this._logLevel = typeof val === "string" ? levelStringToEnum[val] : val;
  };
  Object.defineProperty(Logger2.prototype, "logHandler", {
    get: function() {
      return this._logHandler;
    },
    set: function(val) {
      if (typeof val !== "function") {
        throw new TypeError("Value assigned to `logHandler` must be a function");
      }
      this._logHandler = val;
    },
    enumerable: false,
    configurable: true
  });
  Object.defineProperty(Logger2.prototype, "userLogHandler", {
    get: function() {
      return this._userLogHandler;
    },
    set: function(val) {
      this._userLogHandler = val;
    },
    enumerable: false,
    configurable: true
  });
  Logger2.prototype.debug = function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    this._userLogHandler && this._userLogHandler.apply(this, __spreadArrays([this, LogLevel.DEBUG], args));
    this._logHandler.apply(this, __spreadArrays([this, LogLevel.DEBUG], args));
  };
  Logger2.prototype.log = function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    this._userLogHandler && this._userLogHandler.apply(this, __spreadArrays([this, LogLevel.VERBOSE], args));
    this._logHandler.apply(this, __spreadArrays([this, LogLevel.VERBOSE], args));
  };
  Logger2.prototype.info = function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    this._userLogHandler && this._userLogHandler.apply(this, __spreadArrays([this, LogLevel.INFO], args));
    this._logHandler.apply(this, __spreadArrays([this, LogLevel.INFO], args));
  };
  Logger2.prototype.warn = function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    this._userLogHandler && this._userLogHandler.apply(this, __spreadArrays([this, LogLevel.WARN], args));
    this._logHandler.apply(this, __spreadArrays([this, LogLevel.WARN], args));
  };
  Logger2.prototype.error = function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    this._userLogHandler && this._userLogHandler.apply(this, __spreadArrays([this, LogLevel.ERROR], args));
    this._logHandler.apply(this, __spreadArrays([this, LogLevel.ERROR], args));
  };
  return Logger2;
}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class PlatformLoggerServiceImpl {
  constructor(container) {
    this.container = container;
  }
  getPlatformInfoString() {
    const providers = this.container.getProviders();
    return providers.map((provider) => {
      if (isVersionServiceProvider(provider)) {
        const service = provider.getImmediate();
        return `${service.library}/${service.version}`;
      } else {
        return null;
      }
    }).filter((logString) => logString).join(" ");
  }
}
function isVersionServiceProvider(provider) {
  const component = provider.getComponent();
  return (component === null || component === void 0 ? void 0 : component.type) === "VERSION";
}
const name$1 = "@firebase/app-exp";
const version$1 = "0.0.900-exp.894b5da5a";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const logger = new Logger("@firebase/app");
const name$1$1 = "@firebase/app-compat";
const name$2 = "@firebase/analytics-compat";
const name$3 = "@firebase/analytics-exp";
const name$4 = "@firebase/auth-exp";
const name$5 = "@firebase/auth-compat";
const name$6 = "@firebase/database";
const name$7 = "@firebase/database-compat";
const name$8 = "@firebase/functions-exp";
const name$9 = "@firebase/functions-compat";
const name$a = "@firebase/installations-exp";
const name$b = "@firebase/installations-compat";
const name$c = "@firebase/messaging-exp";
const name$d = "@firebase/messaging-compat";
const name$e = "@firebase/performance-exp";
const name$f = "@firebase/performance-compat";
const name$g = "@firebase/remote-config-exp";
const name$h = "@firebase/remote-config-compat";
const name$i = "@firebase/storage";
const name$j = "@firebase/storage-compat";
const name$k = "@firebase/firestore";
const name$l = "@firebase/firestore-compat";
const name$m = "firebase-exp";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const DEFAULT_ENTRY_NAME = "[DEFAULT]";
const PLATFORM_LOG_STRING = {
  [name$1]: "fire-core",
  [name$1$1]: "fire-core-compat",
  [name$3]: "fire-analytics",
  [name$2]: "fire-analytics-compat",
  [name$4]: "fire-auth",
  [name$5]: "fire-auth-compat",
  [name$6]: "fire-rtdb",
  [name$7]: "fire-rtdb-compat",
  [name$8]: "fire-fn",
  [name$9]: "fire-fn-compat",
  [name$a]: "fire-iid",
  [name$b]: "fire-iid-compat",
  [name$c]: "fire-fcm",
  [name$d]: "fire-fcm-compat",
  [name$e]: "fire-perf",
  [name$f]: "fire-perf-compat",
  [name$g]: "fire-rc",
  [name$h]: "fire-rc-compat",
  [name$i]: "fire-gcs",
  [name$j]: "fire-gcs-compat",
  [name$k]: "fire-fst",
  [name$l]: "fire-fst-compat",
  "fire-js": "fire-js",
  [name$m]: "fire-js-all"
};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _apps = new Map();
const _components = new Map();
function _addComponent(app, component) {
  try {
    app.container.addComponent(component);
  } catch (e) {
    logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app.name}`, e);
  }
}
function _registerComponent(component) {
  const componentName = component.name;
  if (_components.has(componentName)) {
    logger.debug(`There were multiple attempts to register component ${componentName}.`);
    return false;
  }
  _components.set(componentName, component);
  for (const app of _apps.values()) {
    _addComponent(app, component);
  }
  return true;
}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ERRORS = {
  ["no-app"]: "No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",
  ["bad-app-name"]: "Illegal App name: '{$appName}",
  ["duplicate-app"]: "Firebase App named '{$appName}' already exists",
  ["app-deleted"]: "Firebase App named '{$appName}' already deleted",
  ["invalid-app-argument"]: "firebase.{$appName}() takes either no argument or a Firebase App instance.",
  ["invalid-log-argument"]: "First argument to `onLog` must be null or a function."
};
const ERROR_FACTORY = new ErrorFactory("app", "Firebase", ERRORS);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class FirebaseAppImpl {
  constructor(options2, config2, container) {
    this._isDeleted = false;
    this._options = Object.assign({}, options2);
    this._name = config2.name;
    this._automaticDataCollectionEnabled = config2.automaticDataCollectionEnabled;
    this._container = container;
    this.container.addComponent(new Component("app-exp", () => this, "PUBLIC"));
  }
  get automaticDataCollectionEnabled() {
    this.checkDestroyed();
    return this._automaticDataCollectionEnabled;
  }
  set automaticDataCollectionEnabled(val) {
    this.checkDestroyed();
    this._automaticDataCollectionEnabled = val;
  }
  get name() {
    this.checkDestroyed();
    return this._name;
  }
  get options() {
    this.checkDestroyed();
    return this._options;
  }
  get container() {
    return this._container;
  }
  get isDeleted() {
    return this._isDeleted;
  }
  set isDeleted(val) {
    this._isDeleted = val;
  }
  checkDestroyed() {
    if (this.isDeleted) {
      throw ERROR_FACTORY.create("app-deleted", {appName: this._name});
    }
  }
}
function initializeApp(options2, rawConfig = {}) {
  if (typeof rawConfig !== "object") {
    const name3 = rawConfig;
    rawConfig = {name: name3};
  }
  const config2 = Object.assign({name: DEFAULT_ENTRY_NAME, automaticDataCollectionEnabled: false}, rawConfig);
  const name2 = config2.name;
  if (typeof name2 !== "string" || !name2) {
    throw ERROR_FACTORY.create("bad-app-name", {
      appName: String(name2)
    });
  }
  if (_apps.has(name2)) {
    throw ERROR_FACTORY.create("duplicate-app", {appName: name2});
  }
  const container = new ComponentContainer(name2);
  for (const component of _components.values()) {
    container.addComponent(component);
  }
  const newApp = new FirebaseAppImpl(options2, config2, container);
  _apps.set(name2, newApp);
  return newApp;
}
function registerVersion(libraryKeyOrName, version2, variant) {
  var _a2;
  let library = (_a2 = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a2 !== void 0 ? _a2 : libraryKeyOrName;
  if (variant) {
    library += `-${variant}`;
  }
  const libraryMismatch = library.match(/\s|\//);
  const versionMismatch = version2.match(/\s|\//);
  if (libraryMismatch || versionMismatch) {
    const warning = [
      `Unable to register library "${library}" with version "${version2}":`
    ];
    if (libraryMismatch) {
      warning.push(`library name "${library}" contains illegal characters (whitespace or "/")`);
    }
    if (libraryMismatch && versionMismatch) {
      warning.push("and");
    }
    if (versionMismatch) {
      warning.push(`version name "${version2}" contains illegal characters (whitespace or "/")`);
    }
    logger.warn(warning.join(" "));
    return;
  }
  _registerComponent(new Component(`${library}-version`, () => ({library, version: version2}), "VERSION"));
}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function registerCoreComponents(variant) {
  _registerComponent(new Component("platform-logger", (container) => new PlatformLoggerServiceImpl(container), "PRIVATE"));
  registerVersion(name$1, version$1, variant);
  registerVersion("fire-js", "");
}
registerCoreComponents();
var name = "firebase-exp";
var version = "9.0.0-beta.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
registerVersion(name, version, "app");
dotenv.config();
var config = {
  apiKey: process.env["FIREBASE_API_KEY"],
  authDomain: "winepottle.firebaseapp.com",
  projectId: "winepottle",
  storageBucket: "winepottle.appspot.com",
  messagingSenderId: "118092403337",
  appId: "1:118092403337:web:1cf5c3e510b9b19b91ac58",
  measurementId: "G-6KTPW3P72Y"
};
var __layout_svelte_svelte_type_style_lang$1 = "#svelte{font-family:Verdana, Geneva, Tahoma, sans-serif;min-height:100vh;display:flex;flex-direction:column;margin:0}a{text-decoration:none;color:inherit}input, textarea{padding:4px 5px;font-family:inherit;border:1px solid black;border-radius:3px;box-shadow:none;font-size:inherit;margin-bottom:5px}textarea{width:100%;box-sizing:border-box}header.svelte-1nj3e00{display:flex;flex-direction:column;height:50px;border-bottom:1px solid black;color:white;background-color:mediumslateblue;font-weight:bold}#topNav.svelte-1nj3e00{flex:auto;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0px 20px}main.svelte-1nj3e00{flex:1 1 auto;display:flex;flex-direction:column;text-align:center;padding:20px 350px}footer.svelte-1nj3e00{display:flex;flex-direction:row;justify-content:center}";
const css$8 = {
  code: "#svelte{font-family:Verdana, Geneva, Tahoma, sans-serif;min-height:100vh;display:flex;flex-direction:column;margin:0}a{text-decoration:none;color:inherit}input, textarea{padding:4px 5px;font-family:inherit;border:1px solid black;border-radius:3px;box-shadow:none;font-size:inherit;margin-bottom:5px}textarea{width:100%;box-sizing:border-box}header.svelte-1nj3e00{display:flex;flex-direction:column;height:50px;border-bottom:1px solid black;color:white;background-color:mediumslateblue;font-weight:bold}#topNav.svelte-1nj3e00{flex:auto;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0px 20px}main.svelte-1nj3e00{flex:1 1 auto;display:flex;flex-direction:column;text-align:center;padding:20px 350px}footer.svelte-1nj3e00{display:flex;flex-direction:row;justify-content:center}",
  map: `{"version":3,"file":"__layout.svelte","sources":["__layout.svelte"],"sourcesContent":["<script context=\\"module\\" lang=\\"ts\\">;\\r\\nexport const load = ({ session, page }) => {\\r\\n    if (!session.user && !page.path.includes('login')) {\\r\\n        //console.log('Layout loading. No user. Redirecting to login');\\r\\n        return {\\r\\n            status: 302,\\r\\n            redirect: '/login'\\r\\n        };\\r\\n    }\\r\\n    return {\\r\\n        props: {}\\r\\n    };\\r\\n};\\r\\n// onMount(() => {\\r\\n//     if (browser) {\\r\\n//         if (getApps().length === 0) {\\r\\n//             const firebaseApp = initializeApp(firebase_config);\\r\\n//             return {\\r\\n//                 context: { firebaseApp }\\r\\n//             }\\r\\n//         }\\r\\n//     }\\r\\n// })\\r\\n</script>\\r\\n\\r\\n<script lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\nimport { goto } from '$app/navigation';\\r\\nimport { session } from '$app/stores';\\r\\nimport Button from '$lib/components/Button.svelte';\\r\\nimport { loading } from '$lib/stores';\\r\\nimport { writable } from 'svelte/store';\\r\\nimport { setContext, onMount } from 'svelte';\\r\\n;\\r\\nimport { initializeApp } from 'firebase/app';\\r\\nimport config from '../firebase_config';\\r\\nimport { getAuth } from 'firebase/auth';\\r\\nimport { getFirestore } from 'firebase/firestore';\\r\\nlet store = writable({\\r\\n    firebase: null,\\r\\n    auth: null,\\r\\n    firestore: null\\r\\n});\\r\\nsetContext('store', store);\\r\\n$: user = $session.user || null;\\r\\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\\r\\n    window.ssrUser = user;\\r\\n    const firebase = window.firebase || initializeApp(config);\\r\\n    window.firebase = firebase;\\r\\n    const auth = getAuth(firebase);\\r\\n    const firestore = getFirestore(firebase);\\r\\n    //console.log(\\"Setting firebase store in layout\\");\\r\\n    store.set({ firebase, auth, firestore });\\r\\n}));\\r\\nfunction logout() {\\r\\n    return __awaiter(this, void 0, void 0, function* () {\\r\\n        //console.log(\\"Logout function called at \\" + new Date().toISOString());\\r\\n        yield fetch('/auth/logout', {\\r\\n            method: 'post'\\r\\n        });\\r\\n        yield goto('/logout');\\r\\n    });\\r\\n}\\r\\n</script>\\r\\n\\r\\n<header>\\r\\n\\t<nav id=\\"topNav\\">\\r\\n\\t\\t<a id=\\"winePottleLogo\\" href=\\"/\\">Wine Pottle</a>\\r\\n\\t\\t<div>\\r\\n\\t\\t\\t{#if $loading}\\r\\n\\t\\t\\t\\t<p>Loading...</p>\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t</div>\\r\\n\\t\\t<div id=\\"topNavRight\\">\\r\\n\\t\\t\\t{#if $session.user}\\r\\n\\t\\t\\t\\t<a href={\`/profile/\${$session.user.name}\`} style=\\"margin: 0px 20px\\">{$session.user.name}</a>\\r\\n\\t\\t\\t\\t<Button variant=\\"primary\\" on:click={logout}>Logout</Button>\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t<a href=\\"/login\\">Login</a>\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t</div>\\r\\n\\t</nav>\\r\\n</header>\\r\\n\\r\\n<main>\\r\\n\\t<slot />\\r\\n</main>\\r\\n\\r\\n<footer>\\r\\n\\t<p>&copy; Jasmin Natterer 2021</p>\\r\\n</footer>\\r\\n\\r\\n<style>\\r\\n\\t:global(#svelte) {\\r\\n\\t\\tfont-family: Verdana, Geneva, Tahoma, sans-serif;\\r\\n\\t\\tmin-height: 100vh;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tmargin: 0;\\r\\n\\t}\\r\\n\\t:global(a) {\\r\\n\\t\\ttext-decoration: none;\\r\\n\\t\\tcolor: inherit;\\r\\n\\t}\\r\\n\\t:global(input, textarea) {\\r\\n\\t\\tpadding: 4px 5px;\\r\\n\\t\\tfont-family: inherit;\\r\\n\\t\\tborder: 1px solid black;\\r\\n\\t\\tborder-radius: 3px;\\r\\n\\t\\tbox-shadow: none;\\r\\n\\t\\tfont-size: inherit;\\r\\n\\t\\tmargin-bottom: 5px;\\r\\n\\t}\\r\\n\\t:global(textarea) {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\tbox-sizing: border-box;\\r\\n\\t}\\r\\n\\theader {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\theight: 50px;\\r\\n\\t\\tborder-bottom: 1px solid black;\\r\\n\\t\\tcolor: white;\\r\\n\\t\\tbackground-color: mediumslateblue;\\r\\n\\t\\tfont-weight: bold;\\r\\n\\t}\\r\\n\\t#topNav {\\r\\n\\t\\tflex: auto;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: row;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tpadding: 0px 20px;\\r\\n\\t}\\r\\n\\tmain {\\r\\n\\t\\tflex: 1 1 auto;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\ttext-align: center;\\r\\n\\t\\tpadding: 20px 350px;\\r\\n\\t}\\r\\n\\tfooter {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: row;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t}\\r\\n</style>\\r\\n"],"names":[],"mappings":"AAoGS,OAAO,AAAE,CAAC,AACjB,WAAW,CAAE,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,UAAU,CAChD,UAAU,CAAE,KAAK,CACjB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,CAAC,AACV,CAAC,AACO,CAAC,AAAE,CAAC,AACX,eAAe,CAAE,IAAI,CACrB,KAAK,CAAE,OAAO,AACf,CAAC,AACO,eAAe,AAAE,CAAC,AACzB,OAAO,CAAE,GAAG,CAAC,GAAG,CAChB,WAAW,CAAE,OAAO,CACpB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,OAAO,CAClB,aAAa,CAAE,GAAG,AACnB,CAAC,AACO,QAAQ,AAAE,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,AACvB,CAAC,AACD,MAAM,eAAC,CAAC,AACP,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAC9B,KAAK,CAAE,KAAK,CACZ,gBAAgB,CAAE,eAAe,CACjC,WAAW,CAAE,IAAI,AAClB,CAAC,AACD,OAAO,eAAC,CAAC,AACR,IAAI,CAAE,IAAI,CACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,GAAG,CAAC,IAAI,AAClB,CAAC,AACD,IAAI,eAAC,CAAC,AACL,IAAI,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CACd,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,IAAI,CAAC,KAAK,AACpB,CAAC,AACD,MAAM,eAAC,CAAC,AACP,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,MAAM,AACxB,CAAC"}`
};
const load$b = ({session: session2, page}) => {
  if (!session2.user && !page.path.includes("login")) {
    return {status: 302, redirect: "/login"};
  }
  return {props: {}};
};
const _layout$1 = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let user;
  let $session, $$unsubscribe_session;
  let $loading, $$unsubscribe_loading;
  $$unsubscribe_session = subscribe(session, (value) => $session = value);
  $$unsubscribe_loading = subscribe(loading, (value) => $loading = value);
  var __awaiter2 = function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
  let store = writable({
    firebase: null,
    auth: null,
    firestore: null
  });
  setContext("store", store);
  onMount(() => __awaiter2(void 0, void 0, void 0, function* () {
    window.ssrUser = user;
    const firebase = window.firebase || initializeApp(config);
    window.firebase = firebase;
    const auth2 = getAuth(firebase);
    const firestore2 = getFirestore(firebase);
    store.set({firebase, auth: auth2, firestore: firestore2});
  }));
  $$result.css.add(css$8);
  user = $session.user || null;
  $$unsubscribe_session();
  $$unsubscribe_loading();
  return `<header class="${"svelte-1nj3e00"}"><nav id="${"topNav"}" class="${"svelte-1nj3e00"}"><a id="${"winePottleLogo"}" href="${"/"}">Wine Pottle</a>
		<div>${$loading ? `<p>Loading...</p>` : ``}</div>
		<div id="${"topNavRight"}">${$session.user ? `<a${add_attribute("href", `/profile/${$session.user.name}`, 0)} style="${"margin: 0px 20px"}">${escape($session.user.name)}</a>
				${validate_component(Button, "Button").$$render($$result, {variant: "primary"}, {}, {default: () => `Logout`})}` : `<a href="${"/login"}">Login</a>`}</div></nav></header>

<main class="${"svelte-1nj3e00"}">${slots.default ? slots.default({}) : ``}</main>

<footer class="${"svelte-1nj3e00"}"><p>\xA9 Jasmin Natterer 2021</p>
</footer>`;
});
var __layout$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": _layout$1,
  load: load$b
});
const load$a = ({error: error2, status}) => {
  return {
    props: {error: `${status}: ${error2.message}`}
  };
};
const _error = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let {error: error2} = $$props;
  if ($$props.error === void 0 && $$bindings.error && error2 !== void 0)
    $$bindings.error(error2);
  return `<h1>Oooops! Looks like something went wrong.</h1>
<p>${escape(error2)}</p>`;
});
var __error = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": _error,
  load: load$a
});
var ErrorAlert_svelte_svelte_type_style_lang = "div.svelte-eb3fio{padding:10px 20px;border:1px solid tomato;border-radius:2px;color:tomato}";
const css$7 = {
  code: "div.svelte-eb3fio{padding:10px 20px;border:1px solid tomato;border-radius:2px;color:tomato}",
  map: '{"version":3,"file":"ErrorAlert.svelte","sources":["ErrorAlert.svelte"],"sourcesContent":["<!-- ****** Logic ****** -->\\r\\n<script lang=\\"ts\\">export let message;\\r\\n</script>\\r\\n\\r\\n<!-- ****** Styling ****** -->\\r\\n<style>\\r\\n    div {\\r\\n        padding: 10px 20px;\\r\\n        border: 1px solid tomato;\\r\\n        border-radius: 2px;\\r\\n        color: tomato;\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<!-- ****** Markup ****** -->\\r\\n<div>\\r\\n    {message}\\r\\n</div>"],"names":[],"mappings":"AAMI,GAAG,cAAC,CAAC,AACD,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,MAAM,CACxB,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,MAAM,AACjB,CAAC"}'
};
const ErrorAlert = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let {message} = $$props;
  if ($$props.message === void 0 && $$bindings.message && message !== void 0)
    $$bindings.message(message);
  $$result.css.add(css$7);
  return `






<div class="${"svelte-eb3fio"}">${escape(message)}</div>`;
});
var index_svelte_svelte_type_style_lang$4 = "#newVenueButton.svelte-y3qh0l{margin:25px 0px}";
const css$6 = {
  code: "#newVenueButton.svelte-y3qh0l{margin:25px 0px}",
  map: `{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<script context=\\"module\\" lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\n;\\r\\nexport const load = ({ session, fetch }) => __awaiter(void 0, void 0, void 0, function* () {\\r\\n    //console.log('Called load function on index');\\r\\n    if (!session.user) {\\r\\n        //console.log('No user, sending back to login');\\r\\n        return { redirect: 'login', status: 302 };\\r\\n    }\\r\\n    //console.log(session.user);\\r\\n    if (session.venue) {\\r\\n        //console.log('Leaving ' + session.venue.name);\\r\\n        yield fetch('/venues/leave', { method: 'post' });\\r\\n    }\\r\\n    //console.log('Getting venues');\\r\\n    try {\\r\\n        const response = yield fetch(\`venues.json?userId=\${session.user.id}\`);\\r\\n        const data = yield response.json();\\r\\n        return {\\r\\n            props: {\\r\\n                venues: data.venues,\\r\\n                uvms: data.userVenueMemberships\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n    catch (error) {\\r\\n        console.log(error);\\r\\n    }\\r\\n});\\r\\n</script>\\n\\n<script lang=\\"ts\\">import ErrorAlert from '$lib/components/ErrorAlert.svelte';\\r\\nimport { session } from '$app/stores';\\r\\n;\\r\\nexport let venues;\\r\\nexport let uvms;\\r\\nlet err;\\r\\nconst userVenues = uvms.length > 0 ? venues === null || venues === void 0 ? void 0 : venues.filter((v) => uvms.some((uv) => (uv === null || uv === void 0 ? void 0 : uv.venueId) === v.id)) : [];\\r\\nconst otherVenues = userVenues.length > 0 ? venues === null || venues === void 0 ? void 0 : venues.filter((v) => !userVenues.includes(v)) : venues;\\r\\n</script>\\n\\n<h1>Wine Pottle</h1>\\n\\n{#if err}\\n\\t<ErrorAlert message={err} />\\n{/if}\\n\\n<section>\\n\\t{#if $session.user}\\n\\t\\t<p>Welcome {$session.user.name}</p>\\n\\t\\t{#if userVenues.length > 0}\\n\\t\\t\\t<h2>Your Venues</h2>\\n\\t\\t\\t<div id=\\"userVenues\\">\\n\\t\\t\\t\\t{#each userVenues as venue}\\n\\t\\t\\t\\t\\t<p>\\n\\t\\t\\t\\t\\t\\t<a href={\`venues/enter?venueId=\${venue.id}&route=\${venue.route}\`}>{venue.name}</a>\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t\\t<div id=\\"newVenueButton\\">\\n\\t\\t\\t<a href=\\"/venues/create\\">Create A Venue Channel</a>\\n\\t\\t</div>\\n\\t\\t{#if otherVenues.length > 0}\\n\\t\\t\\t<h2>All Venues</h2>\\n\\t\\t\\t<div id=\\"allVenues\\">\\n\\t\\t\\t\\t{#each otherVenues as venue}\\n\\t\\t\\t\\t\\t<p>\\n\\t\\t\\t\\t\\t\\t<a href={\`/venues/join?venue=\${venue.id}\`}>{venue.name}</a>\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t{/if}\\n</section>\\n\\n<style>\\n\\t#newVenueButton {\\n\\t\\tmargin: 25px 0px;\\n\\t}\\n</style>\\n"],"names":[],"mappings":"AAoFC,eAAe,cAAC,CAAC,AAChB,MAAM,CAAE,IAAI,CAAC,GAAG,AACjB,CAAC"}`
};
var __awaiter$6 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$9 = ({session: session2, fetch: fetch2}) => __awaiter$6(void 0, void 0, void 0, function* () {
  if (!session2.user) {
    return {redirect: "login", status: 302};
  }
  if (session2.venue) {
    yield fetch2("/venues/leave", {method: "post"});
  }
  try {
    const response = yield fetch2(`venues.json?userId=${session2.user.id}`);
    const data = yield response.json();
    return {
      props: {
        venues: data.venues,
        uvms: data.userVenueMemberships
      }
    };
  } catch (error2) {
    console.log(error2);
  }
});
const Routes = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $session, $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => $session = value);
  let {venues} = $$props;
  let {uvms} = $$props;
  const userVenues = uvms.length > 0 ? venues === null || venues === void 0 ? void 0 : venues.filter((v) => uvms.some((uv) => (uv === null || uv === void 0 ? void 0 : uv.venueId) === v.id)) : [];
  const otherVenues = userVenues.length > 0 ? venues === null || venues === void 0 ? void 0 : venues.filter((v) => !userVenues.includes(v)) : venues;
  if ($$props.venues === void 0 && $$bindings.venues && venues !== void 0)
    $$bindings.venues(venues);
  if ($$props.uvms === void 0 && $$bindings.uvms && uvms !== void 0)
    $$bindings.uvms(uvms);
  $$result.css.add(css$6);
  $$unsubscribe_session();
  return `<h1>Wine Pottle</h1>

${``}

<section>${$session.user ? `<p>Welcome ${escape($session.user.name)}</p>
		${userVenues.length > 0 ? `<h2>Your Venues</h2>
			<div id="${"userVenues"}">${each(userVenues, (venue) => `<p><a${add_attribute("href", `venues/enter?venueId=${venue.id}&route=${venue.route}`, 0)}>${escape(venue.name)}</a>
					</p>`)}</div>` : ``}
		<div id="${"newVenueButton"}" class="${"svelte-y3qh0l"}"><a href="${"/venues/create"}">Create A Venue Channel</a></div>
		${otherVenues.length > 0 ? `<h2>All Venues</h2>
			<div id="${"allVenues"}">${each(otherVenues, (venue) => `<p><a${add_attribute("href", `/venues/join?venue=${venue.id}`, 0)}>${escape(venue.name)}</a>
					</p>`)}</div>` : ``}` : ``}
</section>`;
});
var index$6 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Routes,
  load: load$9
});
const load$8 = ({session: session2}) => {
  session2.user = null;
  session2.venue = null;
  return {props: {message: "Bye!"}};
};
const Logout = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let {message} = $$props;
  if ($$props.message === void 0 && $$bindings.message && message !== void 0)
    $$bindings.message(message);
  return `






<h2>${escape(message)}</h2>

<div><a href="${"/login"}">Login</a></div>`;
});
var logout = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Logout,
  load: load$8
});
const Create = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => value);
  (function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  });
  let name2 = "";
  let password = "";
  $$unsubscribe_session();
  return `



<h1>New Venue</h1>

<section>${``}
	<form><div><label for="${"venueName"}">Venue Name</label>
			<input id="${"venueName"}" type="${"text"}"${add_attribute("value", name2, 1)}></div>
		<div><label for="${"venuePassword"}">Venue Password</label>
			<input id="${"venuePassword"}" type="${"text"}"${add_attribute("value", password, 1)}></div>
		<div>${validate_component(Button, "Button").$$render($$result, {variant: "primary"}, {}, {default: () => `Create`})}</div></form></section>

`;
});
var create = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Create
});
var __awaiter$5 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$7 = ({page, fetch: fetch2}) => __awaiter$5(void 0, void 0, void 0, function* () {
  const response = yield fetch2(`/venues/${page.query.get("venue")}.json`);
  const data = yield response.json();
  return {props: {venue: data.venue}};
});
const Join = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => value);
  (function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  });
  let {venue} = $$props;
  let password = "";
  if ($$props.venue === void 0 && $$bindings.venue && venue !== void 0)
    $$bindings.venue(venue);
  $$unsubscribe_session();
  return `








<h1>${escape(venue.name)}</h1>

<section>${``}
    <div><label for="${"passwordInput"}">Venue Password</label>
        <input id="${"passwordInput"}" type="${"password"}"${add_attribute("value", password, 1)}>
        ${validate_component(Button, "Button").$$render($$result, {variant: "primary"}, {}, {default: () => `Submit`})}</div></section>`;
});
var join = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Join,
  load: load$7
});
var __layout_svelte_svelte_type_style_lang = "#venueHeader.svelte-qnj26h.svelte-qnj26h{height:100px;margin-bottom:30px}#venueNav.svelte-qnj26h.svelte-qnj26h{flex:auto;display:flex;flex-direction:row;justify-content:center}#venueNav.svelte-qnj26h a.svelte-qnj26h{display:block;margin:auto 20px;font-size:28px}";
const css$5 = {
  code: "#venueHeader.svelte-qnj26h.svelte-qnj26h{height:100px;margin-bottom:30px}#venueNav.svelte-qnj26h.svelte-qnj26h{flex:auto;display:flex;flex-direction:row;justify-content:center}#venueNav.svelte-qnj26h a.svelte-qnj26h{display:block;margin:auto 20px;font-size:28px}",
  map: '{"version":3,"file":"__layout.svelte","sources":["__layout.svelte"],"sourcesContent":["<script context=\\"module\\" lang=\\"ts\\">;\\r\\nexport const load = ({ session }) => {\\r\\n    if (!session.user) {\\r\\n        return {\\r\\n            status: 302,\\r\\n            redirect: \'/login\'\\r\\n        };\\r\\n    }\\r\\n    return {\\r\\n        props: {}\\r\\n    };\\r\\n};\\r\\n</script>\\r\\n\\r\\n<!-- ****** Logic ****** -->\\r\\n<script lang=\\"ts\\">import { session } from \'$app/stores\';\\r\\n</script>\\r\\n\\r\\n<!-- ****** Styling ****** -->\\r\\n<style>\\r\\n    #venueHeader {\\r\\n        height: 100px;\\r\\n        margin-bottom: 30px;\\r\\n    }\\r\\n    #venueNav {\\r\\n        flex: auto;\\r\\n        display: flex;\\r\\n        flex-direction: row;\\r\\n        justify-content: center;\\r\\n    }\\r\\n    #venueNav a {\\r\\n        display: block;\\r\\n        margin: auto 20px;\\r\\n        font-size: 28px;\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<!-- ****** Markup ****** -->\\r\\n<section id=\\"venueHeader\\">\\r\\n    {#if $session.venue}\\r\\n        <h1><a href={`/venues/${$session.venue.route}`}>{$session.venue.name}</a></h1>\\r\\n\\r\\n        <nav id=\'venueNav\'>\\r\\n            <a sveltekit:prefetch href={`/venues/${$session.venue.route}/posts`} >Posts</a>\\r\\n            <a sveltekit:prefetch href={`/venues/${$session.venue.route}/gallery`}>Gallery</a>\\r\\n            <a sveltekit:prefetch href={`/venues/${$session.venue.route}/articles`}>Articles</a>\\r\\n            <a sveltekit:prefetch href={`/venues/${$session.venue.route}/lists`}>Lists</a>\\r\\n            <a sveltekit:prefetch href={`/venues/${$session.venue.route}/reading`}>Reading</a>\\r\\n        </nav>\\r\\n    {/if}\\r\\n</section>\\r\\n\\r\\n<slot></slot>"],"names":[],"mappings":"AAoBI,YAAY,4BAAC,CAAC,AACV,MAAM,CAAE,KAAK,CACb,aAAa,CAAE,IAAI,AACvB,CAAC,AACD,SAAS,4BAAC,CAAC,AACP,IAAI,CAAE,IAAI,CACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,MAAM,AAC3B,CAAC,AACD,uBAAS,CAAC,CAAC,cAAC,CAAC,AACT,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,IAAI,CAAC,IAAI,CACjB,SAAS,CAAE,IAAI,AACnB,CAAC"}'
};
const load$6 = ({session: session2}) => {
  if (!session2.user) {
    return {status: 302, redirect: "/login"};
  }
  return {props: {}};
};
const _layout = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $session, $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => $session = value);
  $$result.css.add(css$5);
  $$unsubscribe_session();
  return `






<section id="${"venueHeader"}" class="${"svelte-qnj26h"}">${$session.venue ? `<h1><a${add_attribute("href", `/venues/${$session.venue.route}`, 0)}>${escape($session.venue.name)}</a></h1>

        <nav id="${"venueNav"}" class="${"svelte-qnj26h"}"><a sveltekit:prefetch${add_attribute("href", `/venues/${$session.venue.route}/posts`, 0)} class="${"svelte-qnj26h"}">Posts</a>
            <a sveltekit:prefetch${add_attribute("href", `/venues/${$session.venue.route}/gallery`, 0)} class="${"svelte-qnj26h"}">Gallery</a>
            <a sveltekit:prefetch${add_attribute("href", `/venues/${$session.venue.route}/articles`, 0)} class="${"svelte-qnj26h"}">Articles</a>
            <a sveltekit:prefetch${add_attribute("href", `/venues/${$session.venue.route}/lists`, 0)} class="${"svelte-qnj26h"}">Lists</a>
            <a sveltekit:prefetch${add_attribute("href", `/venues/${$session.venue.route}/reading`, 0)} class="${"svelte-qnj26h"}">Reading</a></nav>` : ``}</section>

${slots.default ? slots.default({}) : ``}`;
});
var __layout = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": _layout,
  load: load$6
});
var __awaiter$4 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$5 = ({session: session2}) => __awaiter$4(void 0, void 0, void 0, function* () {
  const venue = session2.venue;
  return {props: {venue}};
});
const U5Bvenueu5D = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $session, $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => $session = value);
  $$unsubscribe_session();
  return `








<h2>Welcome ${escape($session.user.name)}</h2>`;
});
var index$5 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": U5Bvenueu5D,
  load: load$5
});
function sortNewest(array) {
  array.sort((a, b) => new Date(b.datetime).valueOf() - new Date(a.datetime).valueOf());
  return array;
}
var index_svelte_svelte_type_style_lang$3 = "#newArticle.svelte-1eumhpq{display:flex;flex-direction:column;text-align:left;gap:10px;margin-bottom:20px}#feed.svelte-1eumhpq{display:flex;flex-direction:column;gap:20px}article.svelte-1eumhpq{display:flex;flex-direction:row}.articleImage.svelte-1eumhpq{width:100px;height:100px}";
const css$4 = {
  code: "#newArticle.svelte-1eumhpq{display:flex;flex-direction:column;text-align:left;gap:10px;margin-bottom:20px}#feed.svelte-1eumhpq{display:flex;flex-direction:column;gap:20px}article.svelte-1eumhpq{display:flex;flex-direction:row}.articleImage.svelte-1eumhpq{width:100px;height:100px}",
  map: `{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<!-- ****** Loading Logic ****** -->\\r\\n<script context=\\"module\\" lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\n;\\r\\n;\\r\\nexport const load = ({ fetch, session }) => __awaiter(void 0, void 0, void 0, function* () {\\r\\n    try {\\r\\n        //console.log(session.venue);\\r\\n        const articlesResponse = yield fetch('/articles.json?venueId=' + session.venue.id);\\r\\n        if (!articlesResponse.ok) {\\r\\n            const errorData = yield articlesResponse.json();\\r\\n            throw errorData.errors;\\r\\n        }\\r\\n        const articles = yield articlesResponse.json();\\r\\n        //console.log(\\"Loaded articles: \\" + articles.length);\\r\\n        return {\\r\\n            props: {\\r\\n                articles: articles\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n    catch (err) {\\r\\n        return {\\r\\n            props: {\\r\\n                err: err\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n});\\r\\n</script>\\r\\n\\r\\n<!-- ****** Client-side Logic ****** -->\\r\\n<script lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\nimport { sortNewest } from '$lib/utils';\\r\\nimport Button from '$lib/components/Button.svelte';\\r\\nimport ErrorAlert from '$lib/components/ErrorAlert.svelte';\\r\\nimport { session } from '$app/stores';\\r\\n;\\r\\n;\\r\\nimport { getContext } from 'svelte';\\r\\nexport let err;\\r\\nconst store = getContext('store');\\r\\n//console.log(\\"Just after getContext \\" + Object.keys($store));\\r\\nexport let articles = [];\\r\\n//console.log(articles.length);\\r\\nlet newArticleUrl = '';\\r\\nfunction newArticle() {\\r\\n    return __awaiter(this, void 0, void 0, function* () {\\r\\n        try {\\r\\n            const newArticle = {\\r\\n                userId: $session.user.id,\\r\\n                venueId: $session.venue.id,\\r\\n                href: newArticleUrl,\\r\\n                datetime: new Date()\\r\\n            };\\r\\n            const previewResponse = yield fetch('/articles/preview', {\\r\\n                method: 'post',\\r\\n                credentials: 'include',\\r\\n                headers: { 'Content-Type': 'application/json ' },\\r\\n                body: JSON.stringify({ url: newArticleUrl })\\r\\n            });\\r\\n            if (!previewResponse.ok) {\\r\\n                const errorData = yield previewResponse.json();\\r\\n                throw errorData.errors;\\r\\n            }\\r\\n            newArticle.preview = (yield previewResponse.json());\\r\\n            articles = [...articles, newArticle];\\r\\n            fetch('/articles.json', {\\r\\n                method: 'post',\\r\\n                credentials: 'include',\\r\\n                headers: { 'Content-Type': 'application/json ' },\\r\\n                body: JSON.stringify(newArticle)\\r\\n            }).then((response) => response.json())\\r\\n                .then(data => {\\r\\n                if (data.errors)\\r\\n                    throw data.errors;\\r\\n                console.log(data);\\r\\n            });\\r\\n        }\\r\\n        catch (error) {\\r\\n            err = error;\\r\\n        }\\r\\n    });\\r\\n}\\r\\n</script>\\r\\n\\r\\n<!-- ****** Markup ****** -->\\r\\n<h1>Articles</h1>\\r\\n\\r\\n{#if err}\\r\\n    <ErrorAlert>{err}</ErrorAlert>\\r\\n{/if}\\r\\n\\r\\n<section id=\\"newArticle\\">\\r\\n\\t<form id=\\"newPostForm\\" on:submit|preventDefault={newArticle}>\\r\\n\\t\\t<div id=\\"titleSection\\">\\r\\n\\t\\t\\t<label for=\\"articleUrl\\">URL</label>\\r\\n\\t\\t\\t<input\\r\\n\\t\\t\\t\\tid=\\"articleUrl\\"\\r\\n\\t\\t\\t\\tbind:value={newArticleUrl}\\r\\n\\t\\t\\t\\ttype=\\"text\\"\\r\\n\\t\\t\\t\\tplaceholder=\\"Paste the address of the article...\\"\\r\\n\\t\\t\\t/>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div id=\\"newPostButtons\\">\\r\\n\\t\\t\\t<Button variant=\\"primary\\" type=\\"submit\\">Post</Button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n</section>\\r\\n\\r\\n<section id=\\"feed\\">\\r\\n\\t{#each sortNewest(articles) as article}\\r\\n\\t\\t<article>\\r\\n\\t\\t\\t<div class=\\"articleImage\\">\\r\\n\\t\\t\\t\\t<img\\r\\n\\t\\t\\t\\t\\tsrc={article.preview?.images?.length > 0 ? article.preview.images[0] : ''}\\r\\n\\t\\t\\t\\t\\talt={article.preview.title}\\r\\n\\t\\t\\t\\t\\twidth=\\"100\\"\\r\\n\\t\\t\\t\\t/>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\"articleInfo\\">\\r\\n\\t\\t\\t\\t<h4>{article.preview.title}</h4>\\r\\n\\t\\t\\t\\t<p>{article.preview.description}</p>\\r\\n\\t\\t\\t\\t<a href={article.href} target=\\"_blank\\">Visit</a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t{/each}\\r\\n</section>\\r\\n\\r\\n<!-- ****** Styling ****** -->\\r\\n<style>\\r\\n\\t#newArticle {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\ttext-align: left;\\r\\n\\t\\tgap: 10px;\\r\\n\\t\\tmargin-bottom: 20px;\\r\\n\\t}\\r\\n\\t#feed {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 20px;\\r\\n\\t}\\r\\n\\tarticle {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: row;\\r\\n\\t}\\r\\n\\t.articleImage {\\r\\n\\t\\twidth: 100px;\\r\\n\\t\\theight: 100px;\\r\\n\\t}\\r\\n</style>\\r\\n"],"names":[],"mappings":"AAkJC,WAAW,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,UAAU,CAAE,IAAI,CAChB,GAAG,CAAE,IAAI,CACT,aAAa,CAAE,IAAI,AACpB,CAAC,AACD,KAAK,eAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI,AACV,CAAC,AACD,OAAO,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,AACpB,CAAC,AACD,aAAa,eAAC,CAAC,AACd,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,AACd,CAAC"}`
};
var __awaiter$3 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$4 = ({fetch: fetch2, session: session2}) => __awaiter$3(void 0, void 0, void 0, function* () {
  try {
    const articlesResponse = yield fetch2("/articles.json?venueId=" + session2.venue.id);
    if (!articlesResponse.ok) {
      const errorData = yield articlesResponse.json();
      throw errorData.errors;
    }
    const articles = yield articlesResponse.json();
    return {props: {articles}};
  } catch (err) {
    return {props: {err}};
  }
});
const Articles = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => value);
  (function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  });
  let {err} = $$props;
  getContext("store");
  let {articles = []} = $$props;
  let newArticleUrl = "";
  if ($$props.err === void 0 && $$bindings.err && err !== void 0)
    $$bindings.err(err);
  if ($$props.articles === void 0 && $$bindings.articles && articles !== void 0)
    $$bindings.articles(articles);
  $$result.css.add(css$4);
  $$unsubscribe_session();
  return `






<h1>Articles</h1>

${err ? `${validate_component(ErrorAlert, "ErrorAlert").$$render($$result, {}, {}, {default: () => `${escape(err)}`})}` : ``}

<section id="${"newArticle"}" class="${"svelte-1eumhpq"}"><form id="${"newPostForm"}"><div id="${"titleSection"}"><label for="${"articleUrl"}">URL</label>
			<input id="${"articleUrl"}" type="${"text"}" placeholder="${"Paste the address of the article..."}"${add_attribute("value", newArticleUrl, 1)}></div>
		<div id="${"newPostButtons"}">${validate_component(Button, "Button").$$render($$result, {variant: "primary", type: "submit"}, {}, {default: () => `Post`})}</div></form></section>

<section id="${"feed"}" class="${"svelte-1eumhpq"}">${each(sortNewest(articles), (article) => {
    var _a2, _b;
    return `<article class="${"svelte-1eumhpq"}"><div class="${"articleImage svelte-1eumhpq"}"><img${add_attribute("src", ((_b = (_a2 = article.preview) == null ? void 0 : _a2.images) == null ? void 0 : _b.length) > 0 ? article.preview.images[0] : "", 0)}${add_attribute("alt", article.preview.title, 0)} width="${"100"}"></div>
			<div class="${"articleInfo"}"><h4>${escape(article.preview.title)}</h4>
				<p>${escape(article.preview.description)}</p>
				<a${add_attribute("href", article.href, 0)} target="${"_blank"}">Visit</a></div>
		</article>`;
  })}</section>

`;
});
var index$4 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Articles,
  load: load$4
});
var index_svelte_svelte_type_style_lang$2 = "#gallery.svelte-3xdcj1{display:flex;flex-direction:column;gap:30px\r\n    }";
const css$3 = {
  code: "#gallery.svelte-3xdcj1{display:flex;flex-direction:column;gap:30px\r\n    }",
  map: `{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<!-- ****** Logic ****** -->\\r\\n<script context=\\"module\\" lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\n;\\r\\n;\\r\\nexport const load = ({ fetch, session }) => __awaiter(void 0, void 0, void 0, function* () {\\r\\n    try {\\r\\n        const galleryResponse = yield fetch(\`/images/venues/\${session.venue.route}.json\`);\\r\\n        if (!galleryResponse.ok) {\\r\\n            const errorData = yield galleryResponse.json();\\r\\n            throw errorData.errors;\\r\\n        }\\r\\n        const gallery = yield galleryResponse.json();\\r\\n        return {\\r\\n            props: {\\r\\n                gallery: gallery\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n    catch (err) {\\r\\n        return {\\r\\n            props: {\\r\\n                err: err\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n});\\r\\n</script>\\r\\n\\r\\n<script lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\nimport { session } from '$app/stores';\\r\\nimport Button from '$lib/components/Button.svelte';\\r\\nimport ErrorAlert from '$lib/components/ErrorAlert.svelte';\\r\\n;\\r\\nexport let err;\\r\\n//Gallery\\r\\nexport let gallery;\\r\\nlet images = (gallery === null || gallery === void 0 ? void 0 : gallery.resources.map(r => r)) || [];\\r\\n$: sortedImages = images.sort((a, b) => new Date(b.created_at).valueOf() - new Date(a.created_at).valueOf());\\r\\n// Image uploading\\r\\nlet files;\\r\\n$: preview = files && files.length > 0 ? URL.createObjectURL(files[0]) : '';\\r\\nfunction uploadImage() {\\r\\n    return __awaiter(this, void 0, void 0, function* () {\\r\\n        try {\\r\\n            let formdata = new FormData();\\r\\n            formdata.append('file', files.item(0));\\r\\n            formdata.append('upload_preset', 'wine-pottle');\\r\\n            formdata.append('folder', 'WinePottle');\\r\\n            formdata.append('tags', $session.venue.route);\\r\\n            let response = yield fetch(\`https://api.cloudinary.com/v1_1/dkj7bctqg/image/upload\`, {\\r\\n                method: 'post',\\r\\n                body: formdata\\r\\n            });\\r\\n            if (!response.ok) {\\r\\n                throw yield response.json();\\r\\n            }\\r\\n            let data = yield response.json();\\r\\n            images = [...images, data];\\r\\n        }\\r\\n        catch (error) {\\r\\n            err = error;\\r\\n        }\\r\\n    });\\r\\n}\\r\\n</script>\\r\\n\\r\\n<!-- ****** Styling ****** -->\\r\\n<style>\\r\\n    #gallery {\\r\\n        display: flex;\\r\\n        flex-direction: column;\\r\\n        gap: 30px\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<!-- ****** Markup ****** -->\\r\\n<h1>Gallery</h1>\\r\\n\\r\\n<form id=\\"uploadForm\\" on:submit|preventDefault={uploadImage} >\\r\\n    <label for=\\"imageUpload\\">Upload Image</label>\\r\\n    <input type=\\"file\\" id=\\"imageUpload\\" accept=\\"image/*\\" bind:files />\\r\\n\\r\\n    <div id=\\"preview\\">\\r\\n        <img src={preview} alt=\\"Preview\\" height=\\"100px\\" />\\r\\n    </div>\\r\\n    <div id=\\"uploadButtonContainer\\">\\r\\n        <Button type='submit'>Upload</Button>\\r\\n    </div>\\r\\n</form>\\r\\n\\r\\n{#if err}\\r\\n    <ErrorAlert>{err}</ErrorAlert>\\r\\n{/if}\\r\\n\\r\\n<div id=\\"gallery\\">\\r\\n    {#each sortedImages as image}\\r\\n        <picture>\\r\\n            <img src={image.secure_url} alt={image.public_id} loading=\\"lazy\\" />\\r\\n        </picture>\\r\\n    {/each}\\r\\n</div>"],"names":[],"mappings":"AAoFI,QAAQ,cAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI;IACb,CAAC"}`
};
var __awaiter$2 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$3 = ({fetch: fetch2, session: session2}) => __awaiter$2(void 0, void 0, void 0, function* () {
  try {
    const galleryResponse = yield fetch2(`/images/venues/${session2.venue.route}.json`);
    if (!galleryResponse.ok) {
      const errorData = yield galleryResponse.json();
      throw errorData.errors;
    }
    const gallery = yield galleryResponse.json();
    return {props: {gallery}};
  } catch (err) {
    return {props: {err}};
  }
});
const Gallery = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let sortedImages;
  let preview2;
  let $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => value);
  (function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  });
  let {err} = $$props;
  let {gallery} = $$props;
  let images = (gallery === null || gallery === void 0 ? void 0 : gallery.resources.map((r) => r)) || [];
  if ($$props.err === void 0 && $$bindings.err && err !== void 0)
    $$bindings.err(err);
  if ($$props.gallery === void 0 && $$bindings.gallery && gallery !== void 0)
    $$bindings.gallery(gallery);
  $$result.css.add(css$3);
  sortedImages = images.sort((a, b) => new Date(b.created_at).valueOf() - new Date(a.created_at).valueOf());
  preview2 = "";
  $$unsubscribe_session();
  return `








<h1>Gallery</h1>

<form id="${"uploadForm"}"><label for="${"imageUpload"}">Upload Image</label>
    <input type="${"file"}" id="${"imageUpload"}" accept="${"image/*"}">

    <div id="${"preview"}"><img${add_attribute("src", preview2, 0)} alt="${"Preview"}" height="${"100px"}"></div>
    <div id="${"uploadButtonContainer"}">${validate_component(Button, "Button").$$render($$result, {type: "submit"}, {}, {default: () => `Upload`})}</div></form>

${err ? `${validate_component(ErrorAlert, "ErrorAlert").$$render($$result, {}, {}, {default: () => `${escape(err)}`})}` : ``}

<div id="${"gallery"}" class="${"svelte-3xdcj1"}">${each(sortedImages, (image) => `<picture><img${add_attribute("src", image.secure_url, 0)}${add_attribute("alt", image.public_id, 0)} loading="${"lazy"}">
        </picture>`)}</div>`;
});
var index$3 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Gallery,
  load: load$3
});
const Reading = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  return `<h1>Reading</h1>`;
});
var index$2 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Reading
});
var index_svelte_svelte_type_style_lang$1 = "#newList.svelte-ko7vyc{display:flex;flex-direction:column;text-align:left;gap:10px;margin-bottom:20px}#feed.svelte-ko7vyc{display:flex;flex-direction:column;gap:20px}article.svelte-ko7vyc{border:1px solid black;border-radius:5px}";
const css$2 = {
  code: "#newList.svelte-ko7vyc{display:flex;flex-direction:column;text-align:left;gap:10px;margin-bottom:20px}#feed.svelte-ko7vyc{display:flex;flex-direction:column;gap:20px}article.svelte-ko7vyc{border:1px solid black;border-radius:5px}",
  map: `{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<!-- ****** Loading Logic ****** -->\\r\\n<script context=\\"module\\" lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\n;\\r\\n;\\r\\nexport const load = ({ session, fetch }) => __awaiter(void 0, void 0, void 0, function* () {\\r\\n    try {\\r\\n        const listResponse = yield fetch('/lists.json?venueId=' + session.venue.id);\\r\\n        if (!listResponse.ok) {\\r\\n            const errorData = yield listResponse.json();\\r\\n            throw errorData.errors;\\r\\n        }\\r\\n        const wineLists = yield listResponse.json();\\r\\n        return {\\r\\n            props: {\\r\\n                wineLists: wineLists\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n    catch (err) {\\r\\n        return {\\r\\n            props: {\\r\\n                err: err\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n});\\r\\n</script>\\r\\n\\r\\n<!-- ****** Client-side Logic ****** -->\\r\\n<script lang=\\"ts\\">import { session } from '$app/stores';\\r\\nimport { sortNewest } from '$lib/utils';\\r\\nimport Button from '$lib/components/Button.svelte';\\r\\nimport ErrorAlert from '$lib/components/ErrorAlert.svelte';\\r\\nexport let err;\\r\\nexport let wineLists = [];\\r\\n//console.log(wineLists);\\r\\nlet newListUrl;\\r\\nlet venueName;\\r\\nlet note;\\r\\nfunction addList() {\\r\\n    try {\\r\\n        const newWineList = {\\r\\n            userId: $session.user.id,\\r\\n            venueId: $session.venue.id,\\r\\n            listVenueName: venueName,\\r\\n            href: newListUrl,\\r\\n            note: note,\\r\\n            datetime: new Date()\\r\\n        };\\r\\n        wineLists = [...wineLists, newWineList];\\r\\n        fetch('/lists.json', {\\r\\n            method: 'post',\\r\\n            credentials: 'include',\\r\\n            headers: { 'Content-Type': 'application/json' },\\r\\n            body: JSON.stringify(newWineList)\\r\\n        }).then((response) => response.json())\\r\\n            .then(data => {\\r\\n            if (data.errors)\\r\\n                throw data.errors;\\r\\n            console.log(data);\\r\\n        });\\r\\n    }\\r\\n    catch (error) {\\r\\n        err = error;\\r\\n    }\\r\\n}\\r\\n</script>\\r\\n\\r\\n<!-- ****** Markup ****** -->\\r\\n<h1>Wine Lists</h1>\\r\\n\\r\\n{#if err}\\r\\n    <ErrorAlert>{err}</ErrorAlert>\\r\\n{/if}\\r\\n\\r\\n<section id=\\"newList\\">\\r\\n    <form id=\\"newListForm\\" on:submit|preventDefault={addList}>\\r\\n        <div>\\r\\n            <label for=\\"venueName\\">Venue</label>\\r\\n            <input id=\\"venueName\\" bind:value={venueName} type=\\"text\\" />\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\"newListUrl\\">Link</label>\\r\\n            <input id=\\"newListUrl\\" bind:value={newListUrl} type=\\"text\\" />\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\"note\\">Note</label>\\r\\n            <textarea id=\\"note\\" bind:value={note} rows=\\"5\\" cols=\\"45\\" ></textarea>\\r\\n        </div>\\r\\n        <div>\\r\\n            <Button variant=\\"primary\\" type=\\"submit\\">Post</Button>\\r\\n        </div>\\r\\n    </form>\\r\\n</section>\\r\\n\\r\\n<section id=\\"feed\\">\\r\\n\\t{#each sortNewest(wineLists) as list}\\r\\n\\t\\t<article>\\r\\n\\t\\t\\t<h4>{list.listVenueName}</h4>\\r\\n            <a href={list.href} target=\\"_blank\\">Open</a>\\r\\n            <p>{list.note}</p>\\r\\n\\t\\t</article>\\r\\n\\t{/each}\\r\\n</section>\\r\\n\\r\\n<!-- ****** Styling ****** -->\\r\\n<style>\\r\\n    #newList {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\ttext-align: left;\\r\\n\\t\\tgap: 10px;\\r\\n\\t\\tmargin-bottom: 20px;\\r\\n\\t}\\r\\n\\t#feed {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 20px;\\r\\n\\t}\\r\\n    article {\\r\\n        border: 1px solid black;\\r\\n        border-radius: 5px;\\r\\n    }\\r\\n</style>\\r\\n"],"names":[],"mappings":"AAmHI,QAAQ,cAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,UAAU,CAAE,IAAI,CAChB,GAAG,CAAE,IAAI,CACT,aAAa,CAAE,IAAI,AACpB,CAAC,AACD,KAAK,cAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI,AACV,CAAC,AACE,OAAO,cAAC,CAAC,AACL,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,aAAa,CAAE,GAAG,AACtB,CAAC"}`
};
var __awaiter$1 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$2 = ({session: session2, fetch: fetch2}) => __awaiter$1(void 0, void 0, void 0, function* () {
  try {
    const listResponse = yield fetch2("/lists.json?venueId=" + session2.venue.id);
    if (!listResponse.ok) {
      const errorData = yield listResponse.json();
      throw errorData.errors;
    }
    const wineLists = yield listResponse.json();
    return {props: {wineLists}};
  } catch (err) {
    return {props: {err}};
  }
});
const Lists = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => value);
  let {err} = $$props;
  let {wineLists = []} = $$props;
  let newListUrl;
  let venueName;
  if ($$props.err === void 0 && $$bindings.err && err !== void 0)
    $$bindings.err(err);
  if ($$props.wineLists === void 0 && $$bindings.wineLists && wineLists !== void 0)
    $$bindings.wineLists(wineLists);
  $$result.css.add(css$2);
  $$unsubscribe_session();
  return `






<h1>Wine Lists</h1>

${err ? `${validate_component(ErrorAlert, "ErrorAlert").$$render($$result, {}, {}, {default: () => `${escape(err)}`})}` : ``}

<section id="${"newList"}" class="${"svelte-ko7vyc"}"><form id="${"newListForm"}"><div><label for="${"venueName"}">Venue</label>
            <input id="${"venueName"}" type="${"text"}"${add_attribute("value", venueName, 1)}></div>
        <div><label for="${"newListUrl"}">Link</label>
            <input id="${"newListUrl"}" type="${"text"}"${add_attribute("value", newListUrl, 1)}></div>
        <div><label for="${"note"}">Note</label>
            <textarea id="${"note"}" rows="${"5"}" cols="${"45"}">${""}</textarea></div>
        <div>${validate_component(Button, "Button").$$render($$result, {variant: "primary", type: "submit"}, {}, {default: () => `Post`})}</div></form></section>

<section id="${"feed"}" class="${"svelte-ko7vyc"}">${each(sortNewest(wineLists), (list) => `<article class="${"svelte-ko7vyc"}"><h4>${escape(list.listVenueName)}</h4>
            <a${add_attribute("href", list.href, 0)} target="${"_blank"}">Open</a>
            <p>${escape(list.note)}</p>
		</article>`)}</section>

`;
});
var index$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Lists,
  load: load$2
});
var Card_svelte_svelte_type_style_lang = ".cardContainer.svelte-1trv6g{border:1px solid black;border-radius:5px}.cardTitle.svelte-1trv6g{border-bottom:1px solid red;font-size:x-large;color:white;background-color:black}.cardContent.svelte-1trv6g{padding:5px;font-style:italic}";
const css$1 = {
  code: ".cardContainer.svelte-1trv6g{border:1px solid black;border-radius:5px}.cardTitle.svelte-1trv6g{border-bottom:1px solid red;font-size:x-large;color:white;background-color:black}.cardContent.svelte-1trv6g{padding:5px;font-style:italic}",
  map: '{"version":3,"file":"Card.svelte","sources":["Card.svelte"],"sourcesContent":["<script lang=\\"ts\\">export let title = \\"\\";\\r\\n</script>\\r\\n\\r\\n<style>\\r\\n    .cardContainer {\\r\\n        border: 1px solid black;\\r\\n        border-radius: 5px;\\r\\n    }\\r\\n    .cardTitle {\\r\\n        border-bottom: 1px solid red;\\r\\n        font-size: x-large;\\r\\n        color: white;\\r\\n        background-color: black;\\r\\n    }\\r\\n    .cardContent {\\r\\n        padding: 5px;\\r\\n        font-style: italic;\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<div class=\\"cardContainer\\">\\r\\n    <div class=\\"cardTitle\\">{title}</div>\\r\\n    <div class=\\"cardContent\\">\\r\\n        <slot></slot>\\r\\n    </div>\\r\\n</div>"],"names":[],"mappings":"AAII,cAAc,cAAC,CAAC,AACZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,aAAa,CAAE,GAAG,AACtB,CAAC,AACD,UAAU,cAAC,CAAC,AACR,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,GAAG,CAC5B,SAAS,CAAE,OAAO,CAClB,KAAK,CAAE,KAAK,CACZ,gBAAgB,CAAE,KAAK,AAC3B,CAAC,AACD,YAAY,cAAC,CAAC,AACV,OAAO,CAAE,GAAG,CACZ,UAAU,CAAE,MAAM,AACtB,CAAC"}'
};
const Card = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let {title = ""} = $$props;
  if ($$props.title === void 0 && $$bindings.title && title !== void 0)
    $$bindings.title(title);
  $$result.css.add(css$1);
  return `<div class="${"cardContainer svelte-1trv6g"}"><div class="${"cardTitle svelte-1trv6g"}">${escape(title)}</div>
    <div class="${"cardContent svelte-1trv6g"}">${slots.default ? slots.default({}) : ``}</div></div>`;
});
var index_svelte_svelte_type_style_lang = "article.svelte-db06qa{border:1px solid black;border-radius:4px}#compose.svelte-db06qa{display:flex;flex-direction:column;text-align:left;gap:10px;margin-bottom:20px}#titleSection.svelte-db06qa{display:flex;align-items:center;gap:10px}#newPostButtons.svelte-db06qa{display:flex;flex-direction:row;justify-content:flex-end;gap:10px}#feed.svelte-db06qa{display:flex;flex-direction:column;gap:20px}";
const css = {
  code: "article.svelte-db06qa{border:1px solid black;border-radius:4px}#compose.svelte-db06qa{display:flex;flex-direction:column;text-align:left;gap:10px;margin-bottom:20px}#titleSection.svelte-db06qa{display:flex;align-items:center;gap:10px}#newPostButtons.svelte-db06qa{display:flex;flex-direction:row;justify-content:flex-end;gap:10px}#feed.svelte-db06qa{display:flex;flex-direction:column;gap:20px}",
  map: `{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<script context=\\"module\\" lang=\\"ts\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\r\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\r\\n    return new (P || (P = Promise))(function (resolve, reject) {\\r\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\r\\n        function rejected(value) { try { step(generator[\\"throw\\"](value)); } catch (e) { reject(e); } }\\r\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\r\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\r\\n    });\\r\\n};\\r\\n;\\r\\n;\\r\\nexport const load = ({ session, fetch }) => __awaiter(void 0, void 0, void 0, function* () {\\r\\n    try {\\r\\n        const response = yield fetch('/posts.json?venueId=' + session.venue.id);\\r\\n        if (!response.ok) {\\r\\n            const errorData = yield response.json();\\r\\n            throw errorData.errors;\\r\\n        }\\r\\n        const posts = yield response.json();\\r\\n        posts.forEach(p => p.datetime = new Date(p.datetime));\\r\\n        return {\\r\\n            props: {\\r\\n                posts: posts\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n    catch (err) {\\r\\n        return {\\r\\n            props: {\\r\\n                err: err\\r\\n            }\\r\\n        };\\r\\n    }\\r\\n});\\r\\n</script>\\r\\n\\r\\n<script lang=\\"ts\\">import Card from \\"$lib/components/Card.svelte\\";\\r\\nimport Button from '$lib/components/Button.svelte';\\r\\nimport ErrorAlert from '$lib/components/ErrorAlert.svelte';\\r\\nimport { session } from \\"$app/stores\\";\\r\\nimport { sortNewest } from \\"$lib/utils\\";\\r\\nexport let err;\\r\\nexport let posts = [];\\r\\nlet title = '';\\r\\nlet content = '';\\r\\nfunction newPost() {\\r\\n    try {\\r\\n        const newPost = {\\r\\n            author: $session.user.name,\\r\\n            title: title,\\r\\n            content: content,\\r\\n            datetime: new Date(),\\r\\n            userId: $session.user.id,\\r\\n            venueId: $session.venue.id\\r\\n        };\\r\\n        posts = [...posts, newPost];\\r\\n        fetch('/posts.json', {\\r\\n            method: 'post',\\r\\n            credentials: 'include',\\r\\n            headers: { 'Content-Type': 'application/json ' },\\r\\n            body: JSON.stringify(newPost)\\r\\n        }).then(response => response.json())\\r\\n            .then(data => {\\r\\n            if (data.errors)\\r\\n                throw data.errors;\\r\\n            title = '';\\r\\n            content = '';\\r\\n            newPost.id = data.postId;\\r\\n        });\\r\\n    }\\r\\n    catch (error) {\\r\\n        err = error;\\r\\n    }\\r\\n}\\r\\n</script>\\r\\n\\r\\n<style>\\r\\n    article {\\r\\n        border: 1px solid black;\\r\\n        border-radius: 4px;\\r\\n    }\\r\\n    #compose {\\r\\n        display: flex;\\r\\n        flex-direction: column;\\r\\n        text-align: left;\\r\\n        gap: 10px;\\r\\n        margin-bottom: 20px;\\r\\n    }\\r\\n    #titleSection {\\r\\n        display: flex;\\r\\n        align-items: center;\\r\\n        gap: 10px;\\r\\n    }\\r\\n    #newPostButtons {\\r\\n        display: flex;\\r\\n        flex-direction: row;\\r\\n        justify-content: flex-end;\\r\\n        gap: 10px;\\r\\n    }\\r\\n    #feed {\\r\\n        display: flex;\\r\\n        flex-direction: column;\\r\\n        gap: 20px;\\r\\n    }\\r\\n</style>\\r\\n\\r\\n<h2>Posts</h2>\\r\\n\\r\\n{#if err}\\r\\n    <ErrorAlert>{err}</ErrorAlert>\\r\\n{/if}\\r\\n\\r\\n<section id=\\"compose\\">\\r\\n    <form id=\\"newPostForm\\" on:submit|preventDefault={newPost}>\\r\\n        <div id=\\"titleSection\\">\\r\\n            <label for=\\"newPostTitle\\">Title</label>\\r\\n            <input id=\\"newPostTitle\\" bind:value={title} type=\\"text\\" placeholder=\\"Give your post a title...\\" />\\r\\n        </div>\\r\\n        <div id=\\"contentSection\\">\\r\\n            <textarea id=\\"newPostContent\\" rows=\\"5\\" cols=\\"45\\" placeholder=\\"Write a new post...\\" bind:value={content}></textarea>\\r\\n        </div>\\r\\n        <div id=\\"newPostButtons\\">\\r\\n            <Button variant=\\"secondary\\" type=\\"reset\\">Clear</Button>\\r\\n            <Button variant=\\"primary\\" type=\\"submit\\">Post</Button>\\r\\n        </div>\\r\\n    </form>\\r\\n</section>\\r\\n\\r\\n<section id=\\"feed\\">\\r\\n    {#each sortNewest(posts) as post}\\r\\n        <article>\\r\\n            <h3>{post.title}</h3>\\r\\n            <strong>{post.author}</strong>\\r\\n            <i>{post.datetime.toLocaleDateString()}</i>\\r\\n            <p>{post.content}</p>\\r\\n        </article>\\r\\n    {/each}\\r\\n</section>"],"names":[],"mappings":"AA6EI,OAAO,cAAC,CAAC,AACL,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,aAAa,CAAE,GAAG,AACtB,CAAC,AACD,QAAQ,cAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,UAAU,CAAE,IAAI,CAChB,GAAG,CAAE,IAAI,CACT,aAAa,CAAE,IAAI,AACvB,CAAC,AACD,aAAa,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,IAAI,AACb,CAAC,AACD,eAAe,cAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,QAAQ,CACzB,GAAG,CAAE,IAAI,AACb,CAAC,AACD,KAAK,cAAC,CAAC,AACH,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI,AACb,CAAC"}`
};
var __awaiter = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
const load$1 = ({session: session2, fetch: fetch2}) => __awaiter(void 0, void 0, void 0, function* () {
  try {
    const response = yield fetch2("/posts.json?venueId=" + session2.venue.id);
    if (!response.ok) {
      const errorData = yield response.json();
      throw errorData.errors;
    }
    const posts = yield response.json();
    posts.forEach((p) => p.datetime = new Date(p.datetime));
    return {props: {posts}};
  } catch (err) {
    return {props: {err}};
  }
});
const Posts = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => value);
  let {err} = $$props;
  let {posts = []} = $$props;
  let title = "";
  if ($$props.err === void 0 && $$bindings.err && err !== void 0)
    $$bindings.err(err);
  if ($$props.posts === void 0 && $$bindings.posts && posts !== void 0)
    $$bindings.posts(posts);
  $$result.css.add(css);
  $$unsubscribe_session();
  return `<h2>Posts</h2>

${err ? `${validate_component(ErrorAlert, "ErrorAlert").$$render($$result, {}, {}, {default: () => `${escape(err)}`})}` : ``}

<section id="${"compose"}" class="${"svelte-db06qa"}"><form id="${"newPostForm"}"><div id="${"titleSection"}" class="${"svelte-db06qa"}"><label for="${"newPostTitle"}">Title</label>
            <input id="${"newPostTitle"}" type="${"text"}" placeholder="${"Give your post a title..."}"${add_attribute("value", title, 1)}></div>
        <div id="${"contentSection"}"><textarea id="${"newPostContent"}" rows="${"5"}" cols="${"45"}" placeholder="${"Write a new post..."}">${""}</textarea></div>
        <div id="${"newPostButtons"}" class="${"svelte-db06qa"}">${validate_component(Button, "Button").$$render($$result, {variant: "secondary", type: "reset"}, {}, {default: () => `Clear`})}
            ${validate_component(Button, "Button").$$render($$result, {variant: "primary", type: "submit"}, {}, {default: () => `Post`})}</div></form></section>

<section id="${"feed"}" class="${"svelte-db06qa"}">${each(sortNewest(posts), (post2) => `<article class="${"svelte-db06qa"}"><h3>${escape(post2.title)}</h3>
            <strong>${escape(post2.author)}</strong>
            <i>${escape(post2.datetime.toLocaleDateString())}</i>
            <p>${escape(post2.content)}</p>
        </article>`)}</section>`;
});
var index = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Posts,
  load: load$1
});
const Auth = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_loading;
  let $$unsubscribe_store;
  let $$unsubscribe_session;
  $$unsubscribe_loading = subscribe(loading, (value) => value);
  $$unsubscribe_session = subscribe(session, (value) => value);
  (function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  });
  let {authMode = "login"} = $$props;
  const store = getContext("store");
  $$unsubscribe_store = subscribe(store, (value) => value);
  let email = "";
  let username = "";
  let password = "";
  let confirmPassword = "";
  if ($$props.authMode === void 0 && $$bindings.authMode && authMode !== void 0)
    $$bindings.authMode(authMode);
  $$unsubscribe_loading();
  $$unsubscribe_store();
  $$unsubscribe_session();
  return `






${validate_component(Card, "Card").$$render($$result, {
    title: authMode === "login" ? "Login" : "Register"
  }, {}, {
    default: () => `<div>${validate_component(Button, "Button").$$render($$result, {
      variant: authMode === "login" ? "secondary" : "primary"
    }, {}, {default: () => `Login`})}
        ${validate_component(Button, "Button").$$render($$result, {
      variant: authMode === "register" ? "secondary" : "primary"
    }, {}, {default: () => `Register`})}</div>
    ${authMode === "login" ? `<div>${``}
            <h4>Login</h4>    
            <div><label for="${"loginEmail"}">Email</label>
                <input id="${"loginEmail"}" type="${"email"}" placeholder="${"Enter your email address"}"${add_attribute("value", email, 1)}></div>
            <div><label for="${"loginPassword"}">Password</label>
                <input id="${"loginPassword"}" type="${"password"}" placeholder="${"Enter your password"}"${add_attribute("value", password, 1)}></div>
            <div>${validate_component(Button, "Button").$$render($$result, {variant: "primary"}, {}, {default: () => `Login`})}</div></div>` : `<div>${``}
            <h4>Register</h4>
            <div><label for="${"registerName"}">Username</label>
                <input id="${"registerName"}" type="${"text"}" placeholder="${"Enter you username"}"${add_attribute("value", username, 1)}></div>    
            <div><label for="${"registerEmail"}">Email</label>
                <input id="${"registerEmail"}" type="${"email"}" placeholder="${"Enter your email address"}"${add_attribute("value", email, 1)}></div>
            <div><label for="${"registerPassword"}">Password</label>
                <input id="${"registerPassword"}" type="${"password"}" placeholder="${"Enter your password"}"${add_attribute("value", password, 1)}></div>
            <div><label for="${"confirmRegisterPassword"}">Password</label>
                <input id="${"confirmRegisterPassword"}" type="${"password"}" placeholder="${"Enter your password"}"${add_attribute("value", confirmPassword, 1)}></div>
            <div>${validate_component(Button, "Button").$$render($$result, {variant: "primary"}, {}, {default: () => `Register`})}</div></div>`}`
  })}`;
});
const load = ({session: session2}) => {
  return {props: {message: "Hello"}};
};
const Login = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $session, $$unsubscribe_session;
  $$unsubscribe_session = subscribe(session, (value) => $session = value);
  let {message} = $$props;
  if ($$props.message === void 0 && $$bindings.message && message !== void 0)
    $$bindings.message(message);
  $$unsubscribe_session();
  return `






<h2>${escape(message)}${escape($session.user ? " " + $session.user.name : "")}!</h2>
${validate_component(Auth, "Auth").$$render($$result, {}, {}, {})}`;
});
var login = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Login,
  load
});
export {init, render};
